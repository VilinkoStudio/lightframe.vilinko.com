import{l as i,b as j,X as q}from"./q-BVGk4Zpa.js";import{Q as x,a as g}from"./q-BrtTncdL.js";import{e as k}from"./q-Cni7KU0_.js";const A=async function(...s){const w=i[0],y=i[1],l=i[2],b=i[3],c=i[4],a=s.length>0&&s[0]instanceof AbortSignal?s.shift():void 0;{let n=s.map(t=>t instanceof SubmitEvent&&t.target instanceof HTMLFormElement?new FormData(t.target):t instanceof Event||t instanceof Node?null:t);n.length||(n=void 0);const f=c.getHash();let p="";const d={...w,method:l,headers:{...y,"Content-Type":"application/qwik-json",Accept:"application/json, application/qwik-json, text/qwik-json-stream, text/plain","X-QRL":f},signal:a},u=c.getCaptured();let r=[n];u?.length?r=[n,...u]:r=n?[n]:[];const m=await j(r);l==="GET"?p+=`&${g}=${encodeURIComponent(m)}`:d.body=m;const e=await fetch(`${b}?${x}=${f}${p}`,d),o=e.headers.get("Content-Type");if(e.ok&&o==="text/qwik-json-stream"&&e.body)return(async function*(){try{for await(const t of k(e.body,a))yield t}finally{a?.aborted||await e.body.cancel()}})();if(o==="application/qwik-json"){const t=await e.text(),h=q(t);if(e.status>=400)throw h;return h}else if(o==="application/json"){const t=await e.json();if(e.status>=400)throw t;return t}else if(o==="text/plain"||o==="text/html"){const t=await e.text();if(e.status>=400)throw t;return t}}};export{A as s_R4yOttYduIc};
