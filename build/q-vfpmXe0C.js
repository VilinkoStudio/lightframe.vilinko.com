import{a as s,M as i}from"./q-PVCjzz3w.js";async function c(r,t){const{controller:e,...n}=t||{},a=`${s.BASE_URL}${r}`;try{const o=await fetch(a,{...n,signal:e?.signal});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(o){throw console.error("API request failed:",a,o),o}}async function l(r){const t=await c(s.ENDPOINTS.SPONSORS,{controller:r});if(t?.code!==200||!t.data)throw new Error("无法获取赞助者名单_错误的响应");const e=[],n=t.data.sponsors.sort().filter(a=>a.startsWith("爱发电用户_")?(e.push(`@${a}`),!1):!0).map(a=>`@${a}`);return n.reverse(),n.push(...e),{names:n,lastUpdate:t.data.date}}async function w(r=999){try{const t=await c(s.ENDPOINTS.CONTRIBUTORS_RECENT);if(t?.code===200&&t.data?.contributors)return t.data.contributors.slice(0,r)}catch(t){console.error("获取最近贡献者列表失败:",t)}return[i.NO_DATA]}async function u(r=1){if(typeof window<"u"&&window.location.hostname==="lightframe.vilinko.com")try{await fetch(`${s.BASE_URL}${s.ENDPOINTS.COUNTER_ADD}?id=${r}`)}catch{}}async function h(){await u(1)}export{w as a,l as g,h as t};
