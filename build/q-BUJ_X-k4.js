import{a as Re,M as ka,D as Pa}from"./q-0cQNh0A5.js";var qi=typeof global=="object"&&global&&global.Object===Object&&global,Ma=typeof self=="object"&&self&&self.Object===Object&&self,Tt=qi||Ma||Function("return this")(),et=Tt.Symbol,Qi=Object.prototype,ba=Qi.hasOwnProperty,Ua=Qi.toString,fe=et?et.toStringTag:void 0;function wa(e){var t=ba.call(e,fe),n=e[fe];try{e[fe]=void 0;var r=!0}catch{}var i=Ua.call(e);return r&&(t?e[fe]=n:delete e[fe]),i}var Fa=Object.prototype,$a=Fa.toString;function Da(e){return $a.call(e)}var Ba="[object Null]",Ga="[object Undefined]",Hr=et?et.toStringTag:void 0;function Bt(e){return e==null?e===void 0?Ga:Ba:Hr&&Hr in Object(e)?wa(e):Da(e)}function ht(e){return e!=null&&typeof e=="object"}var Ka="[object Symbol]";function ln(e){return typeof e=="symbol"||ht(e)&&Bt(e)==Ka}function hn(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var _=Array.isArray,zr=et?et.prototype:void 0,Vr=zr?zr.toString:void 0;function Zi(e){if(typeof e=="string")return e;if(_(e))return hn(e,Zi)+"";if(ln(e))return Vr?Vr.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Wa=/\s/;function ja(e){for(var t=e.length;t--&&Wa.test(e.charAt(t)););return t}var Ha=/^\s+/;function za(e){return e&&e.slice(0,ja(e)+1).replace(Ha,"")}function nt(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Yr=NaN,Va=/^[-+]0x[0-9a-f]+$/i,Ya=/^0b[01]+$/i,Xa=/^0o[0-7]+$/i,qa=parseInt;function Qa(e){if(typeof e=="number")return e;if(ln(e))return Yr;if(nt(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=nt(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=za(e);var n=Ya.test(e);return n||Xa.test(e)?qa(e.slice(2),n?2:8):Va.test(e)?Yr:+e}var Xr=1/0,Za=17976931348623157e292;function Ja(e){if(!e)return e===0?e:0;if(e=Qa(e),e===Xr||e===-Xr){var t=e<0?-1:1;return t*Za}return e===e?e:0}function fn(e){var t=Ja(e),n=t%1;return t===t?n?t-n:t:0}function ee(e){return e}var to="[object AsyncFunction]",eo="[object Function]",no="[object GeneratorFunction]",ro="[object Proxy]";function kt(e){if(!nt(e))return!1;var t=Bt(e);return t==eo||t==no||t==to||t==ro}var Pn=Tt["__core-js_shared__"],qr=(function(){var e=/[^.]+$/.exec(Pn&&Pn.keys&&Pn.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function io(e){return!!qr&&qr in e}var so=Function.prototype,ao=so.toString;function Xt(e){if(e!=null){try{return ao.call(e)}catch{}try{return e+""}catch{}}return""}var oo=/[\\^$.*+?()[\]{}|]/g,co=/^\[object .+?Constructor\]$/,uo=Function.prototype,lo=Object.prototype,ho=uo.toString,fo=lo.hasOwnProperty,po=RegExp("^"+ho.call(fo).replace(oo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function mo(e){if(!nt(e)||io(e))return!1;var t=kt(e)?po:co;return t.test(Xt(e))}function Eo(e,t){return e?.[t]}function qt(e,t){var n=Eo(e,t);return mo(n)?n:void 0}var Gn=qt(Tt,"WeakMap"),Qr=Object.create,go=(function(){function e(){}return function(t){if(!nt(t))return{};if(Qr)return Qr(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}})();function To(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function b(){}function Ao(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var Ro=800,So=16,Oo=Date.now;function Io(e){var t=0,n=0;return function(){var r=Oo(),i=So-(r-n);if(n=r,i>0){if(++t>=Ro)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function No(e){return function(){return e}}var Xe=(function(){try{var e=qt(Object,"defineProperty");return e({},"",{}),e}catch{}})(),Lo=Xe?function(e,t){return Xe(e,"toString",{configurable:!0,enumerable:!1,value:No(t),writable:!0})}:ee,_o=Io(Lo);function Ji(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}function ts(e,t,n,r){for(var i=e.length,s=n+-1;++s<i;)if(t(e[s],s,e))return s;return-1}function Co(e){return e!==e}function yo(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function er(e,t,n){return t===t?yo(e,t,n):ts(e,Co,n)}function es(e,t){var n=e==null?0:e.length;return!!n&&er(e,t,0)>-1}var xo=9007199254740991,vo=/^(?:0|[1-9]\d*)$/;function dn(e,t){var n=typeof e;return t=t??xo,!!t&&(n=="number"||n!="symbol"&&vo.test(e))&&e>-1&&e%1==0&&e<t}function nr(e,t,n){t=="__proto__"&&Xe?Xe(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function xe(e,t){return e===t||e!==e&&t!==t}var ko=Object.prototype,Po=ko.hasOwnProperty;function pn(e,t,n){var r=e[t];(!(Po.call(e,t)&&xe(r,n))||n===void 0&&!(t in e))&&nr(e,t,n)}function rr(e,t,n,r){var i=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var o=t[s],c=void 0;c===void 0&&(c=e[o]),i?nr(n,o,c):pn(n,o,c)}return n}var Zr=Math.max;function Mo(e,t,n){return t=Zr(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,s=Zr(r.length-t,0),a=Array(s);++i<s;)a[i]=r[t+i];i=-1;for(var o=Array(t+1);++i<t;)o[i]=r[i];return o[t]=n(a),To(e,this,o)}}function ir(e,t){return _o(Mo(e,t,ee),e+"")}var bo=9007199254740991;function sr(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=bo}function At(e){return e!=null&&sr(e.length)&&!kt(e)}function ns(e,t,n){if(!nt(n))return!1;var r=typeof t;return(r=="number"?At(n)&&dn(t,n.length):r=="string"&&t in n)?xe(n[t],e):!1}function Uo(e){return ir(function(t,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(s=e.length>3&&typeof s=="function"?(i--,s):void 0,a&&ns(n[0],n[1],a)&&(s=i<3?void 0:s,i=1),t=Object(t);++r<i;){var o=n[r];o&&e(t,o,r,s)}return t})}var wo=Object.prototype;function ve(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||wo;return e===n}function Fo(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var $o="[object Arguments]";function Jr(e){return ht(e)&&Bt(e)==$o}var rs=Object.prototype,Do=rs.hasOwnProperty,Bo=rs.propertyIsEnumerable,mn=Jr((function(){return arguments})())?Jr:function(e){return ht(e)&&Do.call(e,"callee")&&!Bo.call(e,"callee")};function Go(){return!1}var is=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ti=is&&typeof module=="object"&&module&&!module.nodeType&&module,Ko=ti&&ti.exports===is,ei=Ko?Tt.Buffer:void 0,Wo=ei?ei.isBuffer:void 0,Se=Wo||Go,jo="[object Arguments]",Ho="[object Array]",zo="[object Boolean]",Vo="[object Date]",Yo="[object Error]",Xo="[object Function]",qo="[object Map]",Qo="[object Number]",Zo="[object Object]",Jo="[object RegExp]",tc="[object Set]",ec="[object String]",nc="[object WeakMap]",rc="[object ArrayBuffer]",ic="[object DataView]",sc="[object Float32Array]",ac="[object Float64Array]",oc="[object Int8Array]",cc="[object Int16Array]",uc="[object Int32Array]",lc="[object Uint8Array]",hc="[object Uint8ClampedArray]",fc="[object Uint16Array]",dc="[object Uint32Array]",v={};v[sc]=v[ac]=v[oc]=v[cc]=v[uc]=v[lc]=v[hc]=v[fc]=v[dc]=!0;v[jo]=v[Ho]=v[rc]=v[zo]=v[ic]=v[Vo]=v[Yo]=v[Xo]=v[qo]=v[Qo]=v[Zo]=v[Jo]=v[tc]=v[ec]=v[nc]=!1;function pc(e){return ht(e)&&sr(e.length)&&!!v[Bt(e)]}function En(e){return function(t){return e(t)}}var ss=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Te=ss&&typeof module=="object"&&module&&!module.nodeType&&module,mc=Te&&Te.exports===ss,Mn=mc&&qi.process,$t=(function(){try{var e=Te&&Te.require&&Te.require("util").types;return e||Mn&&Mn.binding&&Mn.binding("util")}catch{}})(),ni=$t&&$t.isTypedArray,ar=ni?En(ni):pc,Ec=Object.prototype,gc=Ec.hasOwnProperty;function as(e,t){var n=_(e),r=!n&&mn(e),i=!n&&!r&&Se(e),s=!n&&!r&&!i&&ar(e),a=n||r||i||s,o=a?Fo(e.length,String):[],c=o.length;for(var u in e)(t||gc.call(e,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||dn(u,c)))&&o.push(u);return o}function os(e,t){return function(n){return e(t(n))}}var Tc=os(Object.keys,Object),Ac=Object.prototype,Rc=Ac.hasOwnProperty;function cs(e){if(!ve(e))return Tc(e);var t=[];for(var n in Object(e))Rc.call(e,n)&&n!="constructor"&&t.push(n);return t}function rt(e){return At(e)?as(e):cs(e)}var Sc=Object.prototype,Oc=Sc.hasOwnProperty,X=Uo(function(e,t){if(ve(t)||At(t)){rr(t,rt(t),e);return}for(var n in t)Oc.call(t,n)&&pn(e,n,t[n])});function Ic(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var Nc=Object.prototype,Lc=Nc.hasOwnProperty;function _c(e){if(!nt(e))return Ic(e);var t=ve(e),n=[];for(var r in e)r=="constructor"&&(t||!Lc.call(e,r))||n.push(r);return n}function us(e){return At(e)?as(e,!0):_c(e)}var Cc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yc=/^\w*$/;function or(e,t){if(_(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||ln(e)?!0:yc.test(e)||!Cc.test(e)||t!=null&&e in Object(t)}var Oe=qt(Object,"create");function xc(){this.__data__=Oe?Oe(null):{},this.size=0}function vc(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var kc="__lodash_hash_undefined__",Pc=Object.prototype,Mc=Pc.hasOwnProperty;function bc(e){var t=this.__data__;if(Oe){var n=t[e];return n===kc?void 0:n}return Mc.call(t,e)?t[e]:void 0}var Uc=Object.prototype,wc=Uc.hasOwnProperty;function Fc(e){var t=this.__data__;return Oe?t[e]!==void 0:wc.call(t,e)}var $c="__lodash_hash_undefined__";function Dc(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Oe&&t===void 0?$c:t,this}function zt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}zt.prototype.clear=xc;zt.prototype.delete=vc;zt.prototype.get=bc;zt.prototype.has=Fc;zt.prototype.set=Dc;function Bc(){this.__data__=[],this.size=0}function gn(e,t){for(var n=e.length;n--;)if(xe(e[n][0],t))return n;return-1}var Gc=Array.prototype,Kc=Gc.splice;function Wc(e){var t=this.__data__,n=gn(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Kc.call(t,n,1),--this.size,!0}function jc(e){var t=this.__data__,n=gn(t,e);return n<0?void 0:t[n][1]}function Hc(e){return gn(this.__data__,e)>-1}function zc(e,t){var n=this.__data__,r=gn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function Pt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Pt.prototype.clear=Bc;Pt.prototype.delete=Wc;Pt.prototype.get=jc;Pt.prototype.has=Hc;Pt.prototype.set=zc;var Ie=qt(Tt,"Map");function Vc(){this.size=0,this.__data__={hash:new zt,map:new(Ie||Pt),string:new zt}}function Yc(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Tn(e,t){var n=e.__data__;return Yc(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Xc(e){var t=Tn(this,e).delete(e);return this.size-=t?1:0,t}function qc(e){return Tn(this,e).get(e)}function Qc(e){return Tn(this,e).has(e)}function Zc(e,t){var n=Tn(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function Mt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Mt.prototype.clear=Vc;Mt.prototype.delete=Xc;Mt.prototype.get=qc;Mt.prototype.has=Qc;Mt.prototype.set=Zc;var Jc="Expected a function";function cr(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Jc);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=e.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(cr.Cache||Mt),n}cr.Cache=Mt;var tu=500;function eu(e){var t=cr(e,function(r){return n.size===tu&&n.clear(),r}),n=t.cache;return t}var nu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ru=/\\(\\)?/g,iu=eu(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(nu,function(n,r,i,s){t.push(i?s.replace(ru,"$1"):r||n)}),t});function su(e){return e==null?"":Zi(e)}function An(e,t){return _(e)?e:or(e,t)?[e]:iu(su(e))}function ke(e){if(typeof e=="string"||ln(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function ur(e,t){t=An(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[ke(t[n++])];return n&&n==r?e:void 0}function au(e,t,n){var r=e==null?void 0:ur(e,t);return r===void 0?n:r}function lr(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var ri=et?et.isConcatSpreadable:void 0;function ou(e){return _(e)||mn(e)||!!(ri&&e&&e[ri])}function hr(e,t,n,r,i){var s=-1,a=e.length;for(n||(n=ou),i||(i=[]);++s<a;){var o=e[s];n(o)?lr(i,o):r||(i[i.length]=o)}return i}function ut(e){var t=e==null?0:e.length;return t?hr(e):[]}var ls=os(Object.getPrototypeOf,Object);function hs(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(i);++r<i;)s[r]=e[r+t];return s}function cu(e,t,n,r){var i=-1,s=e==null?0:e.length;for(r&&s&&(n=e[++i]);++i<s;)n=t(n,e[i],i,e);return n}function uu(){this.__data__=new Pt,this.size=0}function lu(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function hu(e){return this.__data__.get(e)}function fu(e){return this.__data__.has(e)}var du=200;function pu(e,t){var n=this.__data__;if(n instanceof Pt){var r=n.__data__;if(!Ie||r.length<du-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Mt(r)}return n.set(e,t),this.size=n.size,this}function gt(e){var t=this.__data__=new Pt(e);this.size=t.size}gt.prototype.clear=uu;gt.prototype.delete=lu;gt.prototype.get=hu;gt.prototype.has=fu;gt.prototype.set=pu;function mu(e,t){return e&&rr(t,rt(t),e)}var fs=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ii=fs&&typeof module=="object"&&module&&!module.nodeType&&module,Eu=ii&&ii.exports===fs,si=Eu?Tt.Buffer:void 0,ai=si?si.allocUnsafe:void 0;function gu(e,t){var n=e.length,r=ai?ai(n):new e.constructor(n);return e.copy(r),r}function fr(e,t){for(var n=-1,r=e==null?0:e.length,i=0,s=[];++n<r;){var a=e[n];t(a,n,e)&&(s[i++]=a)}return s}function ds(){return[]}var Tu=Object.prototype,Au=Tu.propertyIsEnumerable,oi=Object.getOwnPropertySymbols,dr=oi?function(e){return e==null?[]:(e=Object(e),fr(oi(e),function(t){return Au.call(e,t)}))}:ds;function Ru(e,t){return rr(e,dr(e),t)}var Su=Object.getOwnPropertySymbols,Ou=Su?function(e){for(var t=[];e;)lr(t,dr(e)),e=ls(e);return t}:ds;function ps(e,t,n){var r=t(e);return _(e)?r:lr(r,n(e))}function Kn(e){return ps(e,rt,dr)}function Iu(e){return ps(e,us,Ou)}var Wn=qt(Tt,"DataView"),jn=qt(Tt,"Promise"),te=qt(Tt,"Set"),ci="[object Map]",Nu="[object Object]",ui="[object Promise]",li="[object Set]",hi="[object WeakMap]",fi="[object DataView]",Lu=Xt(Wn),_u=Xt(Ie),Cu=Xt(jn),yu=Xt(te),xu=Xt(Gn),J=Bt;(Wn&&J(new Wn(new ArrayBuffer(1)))!=fi||Ie&&J(new Ie)!=ci||jn&&J(jn.resolve())!=ui||te&&J(new te)!=li||Gn&&J(new Gn)!=hi)&&(J=function(e){var t=Bt(e),n=t==Nu?e.constructor:void 0,r=n?Xt(n):"";if(r)switch(r){case Lu:return fi;case _u:return ci;case Cu:return ui;case yu:return li;case xu:return hi}return t});var vu=Object.prototype,ku=vu.hasOwnProperty;function Pu(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&ku.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var qe=Tt.Uint8Array;function Mu(e){var t=new e.constructor(e.byteLength);return new qe(t).set(new qe(e)),t}function bu(e,t){var n=e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var Uu=/\w*$/;function wu(e){var t=new e.constructor(e.source,Uu.exec(e));return t.lastIndex=e.lastIndex,t}var di=et?et.prototype:void 0,pi=di?di.valueOf:void 0;function Fu(e){return pi?Object(pi.call(e)):{}}function $u(e,t){var n=e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var Du="[object Boolean]",Bu="[object Date]",Gu="[object Map]",Ku="[object Number]",Wu="[object RegExp]",ju="[object Set]",Hu="[object String]",zu="[object Symbol]",Vu="[object ArrayBuffer]",Yu="[object DataView]",Xu="[object Float32Array]",qu="[object Float64Array]",Qu="[object Int8Array]",Zu="[object Int16Array]",Ju="[object Int32Array]",tl="[object Uint8Array]",el="[object Uint8ClampedArray]",nl="[object Uint16Array]",rl="[object Uint32Array]";function il(e,t,n){var r=e.constructor;switch(t){case Vu:return Mu(e);case Du:case Bu:return new r(+e);case Yu:return bu(e);case Xu:case qu:case Qu:case Zu:case Ju:case tl:case el:case nl:case rl:return $u(e);case Gu:return new r;case Ku:case Hu:return new r(e);case Wu:return wu(e);case ju:return new r;case zu:return Fu(e)}}function sl(e){return typeof e.constructor=="function"&&!ve(e)?go(ls(e)):{}}var al="[object Map]";function ol(e){return ht(e)&&J(e)==al}var mi=$t&&$t.isMap,cl=mi?En(mi):ol,ul="[object Set]";function ll(e){return ht(e)&&J(e)==ul}var Ei=$t&&$t.isSet,hl=Ei?En(Ei):ll,ms="[object Arguments]",fl="[object Array]",dl="[object Boolean]",pl="[object Date]",ml="[object Error]",Es="[object Function]",El="[object GeneratorFunction]",gl="[object Map]",Tl="[object Number]",gs="[object Object]",Al="[object RegExp]",Rl="[object Set]",Sl="[object String]",Ol="[object Symbol]",Il="[object WeakMap]",Nl="[object ArrayBuffer]",Ll="[object DataView]",_l="[object Float32Array]",Cl="[object Float64Array]",yl="[object Int8Array]",xl="[object Int16Array]",vl="[object Int32Array]",kl="[object Uint8Array]",Pl="[object Uint8ClampedArray]",Ml="[object Uint16Array]",bl="[object Uint32Array]",y={};y[ms]=y[fl]=y[Nl]=y[Ll]=y[dl]=y[pl]=y[_l]=y[Cl]=y[yl]=y[xl]=y[vl]=y[gl]=y[Tl]=y[gs]=y[Al]=y[Rl]=y[Sl]=y[Ol]=y[kl]=y[Pl]=y[Ml]=y[bl]=!0;y[ml]=y[Es]=y[Il]=!1;function We(e,t,n,r,i,s){var a;if(a!==void 0)return a;if(!nt(e))return e;var o=_(e);if(o)return a=Pu(e),Ao(e,a);var c=J(e),u=c==Es||c==El;if(Se(e))return gu(e);if(c==gs||c==ms||u&&!i)return a=u?{}:sl(e),Ru(e,mu(a,e));if(!y[c])return i?e:{};a=il(e,c),s||(s=new gt);var l=s.get(e);if(l)return l;s.set(e,a),hl(e)?e.forEach(function(p){a.add(We(p,t,n,p,e,s))}):cl(e)&&e.forEach(function(p,E){a.set(E,We(p,t,n,E,e,s))});var h=Kn,f=o?void 0:h(e);return Ji(f||e,function(p,E){f&&(E=p,p=e[E]),pn(a,E,We(p,t,n,E,e,s))}),a}var Ul=4;function $(e){return We(e,Ul)}function Pe(e){for(var t=-1,n=e==null?0:e.length,r=0,i=[];++t<n;){var s=e[t];s&&(i[r++]=s)}return i}var wl="__lodash_hash_undefined__";function Fl(e){return this.__data__.set(e,wl),this}function $l(e){return this.__data__.has(e)}function ne(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Mt;++t<n;)this.add(e[t])}ne.prototype.add=ne.prototype.push=Fl;ne.prototype.has=$l;function Ts(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function pr(e,t){return e.has(t)}var Dl=1,Bl=2;function As(e,t,n,r,i,s){var a=n&Dl,o=e.length,c=t.length;if(o!=c&&!(a&&c>o))return!1;var u=s.get(e),l=s.get(t);if(u&&l)return u==t&&l==e;var h=-1,f=!0,p=n&Bl?new ne:void 0;for(s.set(e,t),s.set(t,e);++h<o;){var E=e[h],O=t[h];if(r)var L=a?r(O,E,h,t,e,s):r(E,O,h,e,t,s);if(L!==void 0){if(L)continue;f=!1;break}if(p){if(!Ts(t,function(g,m){if(!pr(p,m)&&(E===g||i(E,g,n,r,s)))return p.push(m)})){f=!1;break}}else if(!(E===O||i(E,O,n,r,s))){f=!1;break}}return s.delete(e),s.delete(t),f}function Gl(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}function mr(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var Kl=1,Wl=2,jl="[object Boolean]",Hl="[object Date]",zl="[object Error]",Vl="[object Map]",Yl="[object Number]",Xl="[object RegExp]",ql="[object Set]",Ql="[object String]",Zl="[object Symbol]",Jl="[object ArrayBuffer]",th="[object DataView]",gi=et?et.prototype:void 0,bn=gi?gi.valueOf:void 0;function eh(e,t,n,r,i,s,a){switch(n){case th:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Jl:return!(e.byteLength!=t.byteLength||!s(new qe(e),new qe(t)));case jl:case Hl:case Yl:return xe(+e,+t);case zl:return e.name==t.name&&e.message==t.message;case Xl:case Ql:return e==t+"";case Vl:var o=Gl;case ql:var c=r&Kl;if(o||(o=mr),e.size!=t.size&&!c)return!1;var u=a.get(e);if(u)return u==t;r|=Wl,a.set(e,t);var l=As(o(e),o(t),r,i,s,a);return a.delete(e),l;case Zl:if(bn)return bn.call(e)==bn.call(t)}return!1}var nh=1,rh=Object.prototype,ih=rh.hasOwnProperty;function sh(e,t,n,r,i,s){var a=n&nh,o=Kn(e),c=o.length,u=Kn(t),l=u.length;if(c!=l&&!a)return!1;for(var h=c;h--;){var f=o[h];if(!(a?f in t:ih.call(t,f)))return!1}var p=s.get(e),E=s.get(t);if(p&&E)return p==t&&E==e;var O=!0;s.set(e,t),s.set(t,e);for(var L=a;++h<c;){f=o[h];var g=e[f],m=t[f];if(r)var d=a?r(m,g,f,t,e,s):r(g,m,f,e,t,s);if(!(d===void 0?g===m||i(g,m,n,r,s):d)){O=!1;break}L||(L=f=="constructor")}if(O&&!L){var T=e.constructor,C=t.constructor;T!=C&&"constructor"in e&&"constructor"in t&&!(typeof T=="function"&&T instanceof T&&typeof C=="function"&&C instanceof C)&&(O=!1)}return s.delete(e),s.delete(t),O}var ah=1,Ti="[object Arguments]",Ai="[object Array]",$e="[object Object]",oh=Object.prototype,Ri=oh.hasOwnProperty;function ch(e,t,n,r,i,s){var a=_(e),o=_(t),c=a?Ai:J(e),u=o?Ai:J(t);c=c==Ti?$e:c,u=u==Ti?$e:u;var l=c==$e,h=u==$e,f=c==u;if(f&&Se(e)){if(!Se(t))return!1;a=!0,l=!1}if(f&&!l)return s||(s=new gt),a||ar(e)?As(e,t,n,r,i,s):eh(e,t,c,n,r,i,s);if(!(n&ah)){var p=l&&Ri.call(e,"__wrapped__"),E=h&&Ri.call(t,"__wrapped__");if(p||E){var O=p?e.value():e,L=E?t.value():t;return s||(s=new gt),i(O,L,n,r,s)}}return f?(s||(s=new gt),sh(e,t,n,r,i,s)):!1}function Er(e,t,n,r,i){return e===t?!0:e==null||t==null||!ht(e)&&!ht(t)?e!==e&&t!==t:ch(e,t,n,r,Er,i)}var uh=1,lh=2;function hh(e,t,n,r){var i=n.length,s=i;if(e==null)return!s;for(e=Object(e);i--;){var a=n[i];if(a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<s;){a=n[i];var o=a[0],c=e[o],u=a[1];if(a[2]){if(c===void 0&&!(o in e))return!1}else{var l=new gt,h;if(!(h===void 0?Er(u,c,uh|lh,r,l):h))return!1}}return!0}function Rs(e){return e===e&&!nt(e)}function fh(e){for(var t=rt(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Rs(i)]}return t}function Ss(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}function dh(e){var t=fh(e);return t.length==1&&t[0][2]?Ss(t[0][0],t[0][1]):function(n){return n===e||hh(n,e,t)}}function ph(e,t){return e!=null&&t in Object(e)}function Os(e,t,n){t=An(t,e);for(var r=-1,i=t.length,s=!1;++r<i;){var a=ke(t[r]);if(!(s=e!=null&&n(e,a)))break;e=e[a]}return s||++r!=i?s:(i=e==null?0:e.length,!!i&&sr(i)&&dn(a,i)&&(_(e)||mn(e)))}function mh(e,t){return e!=null&&Os(e,t,ph)}var Eh=1,gh=2;function Th(e,t){return or(e)&&Rs(t)?Ss(ke(e),t):function(n){var r=au(n,e);return r===void 0&&r===t?mh(n,e):Er(t,r,Eh|gh)}}function Ah(e){return function(t){return t?.[e]}}function Rh(e){return function(t){return ur(t,e)}}function Sh(e){return or(e)?Ah(ke(e)):Rh(e)}function Rt(e){return typeof e=="function"?e:e==null?ee:typeof e=="object"?_(e)?Th(e[0],e[1]):dh(e):Sh(e)}function Oh(e,t,n,r){for(var i=-1,s=e==null?0:e.length;++i<s;){var a=e[i];t(r,a,n(a),e)}return r}function Ih(e){return function(t,n,r){for(var i=-1,s=Object(t),a=r(t),o=a.length;o--;){var c=a[++i];if(n(s[c],c,s)===!1)break}return t}}var Nh=Ih();function Lh(e,t){return e&&Nh(e,t,rt)}function _h(e,t){return function(n,r){if(n==null)return n;if(!At(n))return e(n,r);for(var i=n.length,s=-1,a=Object(n);++s<i&&r(a[s],s,a)!==!1;);return n}}var Qt=_h(Lh);function Ch(e,t,n,r){return Qt(e,function(i,s,a){t(r,i,n(i),a)}),r}function yh(e,t){return function(n,r){var i=_(n)?Oh:Ch,s=t?t():{};return i(n,e,Rt(r),s)}}var Is=Object.prototype,xh=Is.hasOwnProperty,gr=ir(function(e,t){e=Object(e);var n=-1,r=t.length,i=r>2?t[2]:void 0;for(i&&ns(t[0],t[1],i)&&(r=1);++n<r;)for(var s=t[n],a=us(s),o=-1,c=a.length;++o<c;){var u=a[o],l=e[u];(l===void 0||xe(l,Is[u])&&!xh.call(e,u))&&(e[u]=s[u])}return e});function Si(e){return ht(e)&&At(e)}var vh=200;function kh(e,t,n,r){var i=-1,s=es,a=!0,o=e.length,c=[],u=t.length;if(!o)return c;t.length>=vh&&(s=pr,a=!1,t=new ne(t));t:for(;++i<o;){var l=e[i],h=l;if(l=l!==0?l:0,a&&h===h){for(var f=u;f--;)if(t[f]===h)continue t;c.push(l)}else s(t,h,r)||c.push(l)}return c}var Rn=ir(function(e,t){return Si(e)?kh(e,hr(t,1,Si,!0)):[]});function Vt(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}function F(e,t,n){var r=e==null?0:e.length;return r?(t=t===void 0?1:fn(t),hs(e,t<0?0:t,r)):[]}function Ne(e,t,n){var r=e==null?0:e.length;return r?(t=t===void 0?1:fn(t),t=r-t,hs(e,0,t<0?0:t)):[]}function Ph(e){return typeof e=="function"?e:ee}function I(e,t){var n=_(e)?Ji:Qt;return n(e,Ph(t))}function Mh(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function bh(e,t){var n=!0;return Qt(e,function(r,i,s){return n=!!t(r,i,s),n}),n}function lt(e,t,n){var r=_(e)?Mh:bh;return r(e,Rt(t))}function Ns(e,t){var n=[];return Qt(e,function(r,i,s){t(r,i,s)&&n.push(r)}),n}function it(e,t){var n=_(e)?fr:Ns;return n(e,Rt(t))}function Uh(e){return function(t,n,r){var i=Object(t);if(!At(t)){var s=Rt(n);t=rt(t),n=function(o){return s(i[o],o,i)}}var a=e(t,n,r);return a>-1?i[s?t[a]:a]:void 0}}var wh=Math.max;function Fh(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var i=n==null?0:fn(n);return i<0&&(i=wh(r+i,0)),ts(e,Rt(t),i)}var re=Uh(Fh);function ft(e){return e&&e.length?e[0]:void 0}function $h(e,t){var n=-1,r=At(e)?Array(e.length):[];return Qt(e,function(i,s,a){r[++n]=t(i,s,a)}),r}function A(e,t){var n=_(e)?hn:$h;return n(e,Rt(t))}function tt(e,t){return hr(A(e,t))}var Dh=Object.prototype,Bh=Dh.hasOwnProperty,Gh=yh(function(e,t,n){Bh.call(e,n)?e[n].push(t):nr(e,n,[t])}),Kh=Object.prototype,Wh=Kh.hasOwnProperty;function jh(e,t){return e!=null&&Wh.call(e,t)}function S(e,t){return e!=null&&Os(e,t,jh)}var Hh="[object String]";function z(e){return typeof e=="string"||!_(e)&&ht(e)&&Bt(e)==Hh}function zh(e,t){return hn(t,function(n){return e[n]})}function U(e){return e==null?[]:zh(e,rt(e))}var Vh=Math.max;function W(e,t,n,r){e=At(e)?e:U(e),n=n?fn(n):0;var i=e.length;return n<0&&(n=Vh(i+n,0)),z(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&er(e,t,n)>-1}function Oi(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var i=0;return er(e,t,i)}var Yh="[object Map]",Xh="[object Set]",qh=Object.prototype,Qh=qh.hasOwnProperty;function x(e){if(e==null)return!0;if(At(e)&&(_(e)||typeof e=="string"||typeof e.splice=="function"||Se(e)||ar(e)||mn(e)))return!e.length;var t=J(e);if(t==Yh||t==Xh)return!e.size;if(ve(e))return!cs(e).length;for(var n in e)if(Qh.call(e,n))return!1;return!0}var Zh="[object RegExp]";function Jh(e){return ht(e)&&Bt(e)==Zh}var Ii=$t&&$t.isRegExp,yt=Ii?En(Ii):Jh;function xt(e){return e===void 0}var tf="Expected a function";function ef(e){if(typeof e!="function")throw new TypeError(tf);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function nf(e,t,n,r){if(!nt(e))return e;t=An(t,e);for(var i=-1,s=t.length,a=s-1,o=e;o!=null&&++i<s;){var c=ke(t[i]),u=n;if(c==="__proto__"||c==="constructor"||c==="prototype")return e;if(i!=a){var l=o[c];u=void 0,u===void 0&&(u=nt(l)?l:dn(t[i+1])?[]:{})}pn(o,c,u),o=o[c]}return e}function rf(e,t,n){for(var r=-1,i=t.length,s={};++r<i;){var a=t[r],o=ur(e,a);n(o,a)&&nf(s,An(a,e),o)}return s}function dt(e,t){if(e==null)return{};var n=hn(Iu(e),function(r){return[r]});return t=Rt(t),rf(e,n,function(r,i){return t(r,i[0])})}function sf(e,t,n,r,i){return i(e,function(s,a,o){n=r?(r=!1,s):t(n,s,a,o)}),n}function q(e,t,n){var r=_(e)?cu:sf,i=arguments.length<3;return r(e,Rt(t),n,i,Qt)}function Sn(e,t){var n=_(e)?fr:Ns;return n(e,ef(Rt(t)))}function af(e,t){var n;return Qt(e,function(r,i,s){return n=t(r,i,s),!n}),!!n}function Ls(e,t,n){var r=_(e)?Ts:af;return r(e,Rt(t))}var of=1/0,cf=te&&1/mr(new te([,-0]))[1]==of?function(e){return new te(e)}:b,uf=200;function lf(e,t,n){var r=-1,i=es,s=e.length,a=!0,o=[],c=o;if(s>=uf){var u=cf(e);if(u)return mr(u);a=!1,i=pr,c=new ne}else c=o;t:for(;++r<s;){var l=e[r],h=l;if(l=l!==0?l:0,a&&h===h){for(var f=c.length;f--;)if(c[f]===h)continue t;o.push(l)}else i(c,h,n)||(c!==o&&c.push(h),o.push(l))}return o}function Tr(e){return e&&e.length?lf(e):[]}function Hn(e){console&&console.error&&console.error(`Error: ${e}`)}function _s(e){console&&console.warn&&console.warn(`Warning: ${e}`)}function Cs(e){const t=new Date().getTime(),n=e();return{time:new Date().getTime()-t,value:n}}function ys(e){function t(){}t.prototype=e;const n=new t;function r(){return typeof n.bar}return r(),r(),e}function hf(e){return ff(e)?e.LABEL:e.name}function ff(e){return z(e.LABEL)&&e.LABEL!==""}class St{get definition(){return this._definition}set definition(t){this._definition=t}constructor(t){this._definition=t}accept(t){t.visit(this),I(this.definition,n=>{n.accept(t)})}}class Q extends St{constructor(t){super([]),this.idx=1,X(this,dt(t,n=>n!==void 0))}set definition(t){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(t){t.visit(this)}}class se extends St{constructor(t){super(t.definition),this.orgText="",X(this,dt(t,n=>n!==void 0))}}class V extends St{constructor(t){super(t.definition),this.ignoreAmbiguities=!1,X(this,dt(t,n=>n!==void 0))}}class j extends St{constructor(t){super(t.definition),this.idx=1,X(this,dt(t,n=>n!==void 0))}}class Ot extends St{constructor(t){super(t.definition),this.idx=1,X(this,dt(t,n=>n!==void 0))}}class It extends St{constructor(t){super(t.definition),this.idx=1,X(this,dt(t,n=>n!==void 0))}}class w extends St{constructor(t){super(t.definition),this.idx=1,X(this,dt(t,n=>n!==void 0))}}class pt extends St{constructor(t){super(t.definition),this.idx=1,X(this,dt(t,n=>n!==void 0))}}class mt extends St{get definition(){return this._definition}set definition(t){this._definition=t}constructor(t){super(t.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,X(this,dt(t,n=>n!==void 0))}}class k{constructor(t){this.idx=1,X(this,dt(t,n=>n!==void 0))}accept(t){t.visit(this)}}function df(e){return A(e,je)}function je(e){function t(n){return A(n,je)}if(e instanceof Q){const n={type:"NonTerminal",name:e.nonTerminalName,idx:e.idx};return z(e.label)&&(n.label=e.label),n}else{if(e instanceof V)return{type:"Alternative",definition:t(e.definition)};if(e instanceof j)return{type:"Option",idx:e.idx,definition:t(e.definition)};if(e instanceof Ot)return{type:"RepetitionMandatory",idx:e.idx,definition:t(e.definition)};if(e instanceof It)return{type:"RepetitionMandatoryWithSeparator",idx:e.idx,separator:je(new k({terminalType:e.separator})),definition:t(e.definition)};if(e instanceof pt)return{type:"RepetitionWithSeparator",idx:e.idx,separator:je(new k({terminalType:e.separator})),definition:t(e.definition)};if(e instanceof w)return{type:"Repetition",idx:e.idx,definition:t(e.definition)};if(e instanceof mt)return{type:"Alternation",idx:e.idx,definition:t(e.definition)};if(e instanceof k){const n={type:"Terminal",name:e.terminalType.name,label:hf(e.terminalType),idx:e.idx};z(e.label)&&(n.terminalLabel=e.label);const r=e.terminalType.PATTERN;return e.terminalType.PATTERN&&(n.pattern=yt(r)?r.source:r),n}else{if(e instanceof se)return{type:"Rule",name:e.name,orgText:e.orgText,definition:t(e.definition)};throw Error("non exhaustive match")}}}class ae{visit(t){const n=t;switch(n.constructor){case Q:return this.visitNonTerminal(n);case V:return this.visitAlternative(n);case j:return this.visitOption(n);case Ot:return this.visitRepetitionMandatory(n);case It:return this.visitRepetitionMandatoryWithSeparator(n);case pt:return this.visitRepetitionWithSeparator(n);case w:return this.visitRepetition(n);case mt:return this.visitAlternation(n);case k:return this.visitTerminal(n);case se:return this.visitRule(n);default:throw Error("non exhaustive match")}}visitNonTerminal(t){}visitAlternative(t){}visitOption(t){}visitRepetition(t){}visitRepetitionMandatory(t){}visitRepetitionMandatoryWithSeparator(t){}visitRepetitionWithSeparator(t){}visitAlternation(t){}visitTerminal(t){}visitRule(t){}}function pf(e){return e instanceof V||e instanceof j||e instanceof w||e instanceof Ot||e instanceof It||e instanceof pt||e instanceof k||e instanceof se}function Qe(e,t=[]){return e instanceof j||e instanceof w||e instanceof pt?!0:e instanceof mt?Ls(e.definition,r=>Qe(r,t)):e instanceof Q&&W(t,e)?!1:e instanceof St?(e instanceof Q&&t.push(e),lt(e.definition,r=>Qe(r,t))):!1}function mf(e){return e instanceof mt}function Et(e){if(e instanceof Q)return"SUBRULE";if(e instanceof j)return"OPTION";if(e instanceof mt)return"OR";if(e instanceof Ot)return"AT_LEAST_ONE";if(e instanceof It)return"AT_LEAST_ONE_SEP";if(e instanceof pt)return"MANY_SEP";if(e instanceof w)return"MANY";if(e instanceof k)return"CONSUME";throw Error("non exhaustive match")}class On{walk(t,n=[]){I(t.definition,(r,i)=>{const s=F(t.definition,i+1);if(r instanceof Q)this.walkProdRef(r,s,n);else if(r instanceof k)this.walkTerminal(r,s,n);else if(r instanceof V)this.walkFlat(r,s,n);else if(r instanceof j)this.walkOption(r,s,n);else if(r instanceof Ot)this.walkAtLeastOne(r,s,n);else if(r instanceof It)this.walkAtLeastOneSep(r,s,n);else if(r instanceof pt)this.walkManySep(r,s,n);else if(r instanceof w)this.walkMany(r,s,n);else if(r instanceof mt)this.walkOr(r,s,n);else throw Error("non exhaustive match")})}walkTerminal(t,n,r){}walkProdRef(t,n,r){}walkFlat(t,n,r){const i=n.concat(r);this.walk(t,i)}walkOption(t,n,r){const i=n.concat(r);this.walk(t,i)}walkAtLeastOne(t,n,r){const i=[new j({definition:t.definition})].concat(n,r);this.walk(t,i)}walkAtLeastOneSep(t,n,r){const i=Ni(t,n,r);this.walk(t,i)}walkMany(t,n,r){const i=[new j({definition:t.definition})].concat(n,r);this.walk(t,i)}walkManySep(t,n,r){const i=Ni(t,n,r);this.walk(t,i)}walkOr(t,n,r){const i=n.concat(r);I(t.definition,s=>{const a=new V({definition:[s]});this.walk(a,i)})}}function Ni(e,t,n){return[new j({definition:[new k({terminalType:e.separator})].concat(e.definition)})].concat(t,n)}function Me(e){if(e instanceof Q)return Me(e.referencedRule);if(e instanceof k)return Tf(e);if(pf(e))return Ef(e);if(mf(e))return gf(e);throw Error("non exhaustive match")}function Ef(e){let t=[];const n=e.definition;let r=0,i=n.length>r,s,a=!0;for(;i&&a;)s=n[r],a=Qe(s),t=t.concat(Me(s)),r=r+1,i=n.length>r;return Tr(t)}function gf(e){const t=A(e.definition,n=>Me(n));return Tr(ut(t))}function Tf(e){return[e.terminalType]}const xs="_~IN~_";class Af extends On{constructor(t){super(),this.topProd=t,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(t,n,r){}walkProdRef(t,n,r){const i=Sf(t.referencedRule,t.idx)+this.topProd.name,s=n.concat(r),a=new V({definition:s}),o=Me(a);this.follows[i]=o}}function Rf(e){const t={};return I(e,n=>{const r=new Af(n).startWalking();X(t,r)}),t}function Sf(e,t){return e.name+t+xs}function N(e){return e.charCodeAt(0)}function Un(e,t){Array.isArray(e)?e.forEach(function(n){t.push(n)}):t.push(e)}function de(e,t){if(e[t]===!0)throw"duplicate flag "+t;e[t],e[t]=!0}function Jt(e){if(e===void 0)throw Error("Internal Error - Should never get here!");return!0}function Of(){throw Error("Internal Error - Should never get here!")}function Li(e){return e.type==="Character"}const Ze=[];for(let e=N("0");e<=N("9");e++)Ze.push(e);const Je=[N("_")].concat(Ze);for(let e=N("a");e<=N("z");e++)Je.push(e);for(let e=N("A");e<=N("Z");e++)Je.push(e);const _i=[N(" "),N("\f"),N(`
`),N("\r"),N("	"),N("\v"),N("	"),N(" "),N(" "),N(" "),N(" "),N(" "),N(" "),N(" "),N(" "),N(" "),N(" "),N(" "),N(" "),N(" "),N("\u2028"),N("\u2029"),N(" "),N(" "),N("　"),N("\uFEFF")],If=/[0-9a-fA-F]/,De=/[0-9]/,Nf=/[1-9]/;class Lf{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(t){this.idx=t.idx,this.input=t.input,this.groupIdx=t.groupIdx}pattern(t){this.idx=0,this.input=t,this.groupIdx=0,this.consumeChar("/");const n=this.disjunction();this.consumeChar("/");const r={type:"Flags",loc:{begin:this.idx,end:t.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":de(r,"global");break;case"i":de(r,"ignoreCase");break;case"m":de(r,"multiLine");break;case"u":de(r,"unicode");break;case"y":de(r,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:r,value:n,loc:this.loc(0)}}disjunction(){const t=[],n=this.idx;for(t.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),t.push(this.alternative());return{type:"Disjunction",value:t,loc:this.loc(n)}}alternative(){const t=[],n=this.idx;for(;this.isTerm();)t.push(this.term());return{type:"Alternative",value:t,loc:this.loc(n)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){const t=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(t)};case"$":return{type:"EndAnchor",loc:this.loc(t)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(t)};case"B":return{type:"NonWordBoundary",loc:this.loc(t)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let n;switch(this.popChar()){case"=":n="Lookahead";break;case"!":n="NegativeLookahead";break;case"<":{switch(this.popChar()){case"=":n="Lookbehind";break;case"!":n="NegativeLookbehind"}break}}Jt(n);const r=this.disjunction();return this.consumeChar(")"),{type:n,value:r,loc:this.loc(t)}}return Of()}quantifier(t=!1){let n;const r=this.idx;switch(this.popChar()){case"*":n={atLeast:0,atMost:1/0};break;case"+":n={atLeast:1,atMost:1/0};break;case"?":n={atLeast:0,atMost:1};break;case"{":const i=this.integerIncludingZero();switch(this.popChar()){case"}":n={atLeast:i,atMost:i};break;case",":let s;this.isDigit()?(s=this.integerIncludingZero(),n={atLeast:i,atMost:s}):n={atLeast:i,atMost:1/0},this.consumeChar("}");break}if(t===!0&&n===void 0)return;Jt(n);break}if(!(t===!0&&n===void 0)&&Jt(n))return this.peekChar(0)==="?"?(this.consumeChar("?"),n.greedy=!1):n.greedy=!0,n.type="Quantifier",n.loc=this.loc(r),n}atom(){let t;const n=this.idx;switch(this.peekChar()){case".":t=this.dotAll();break;case"\\":t=this.atomEscape();break;case"[":t=this.characterClass();break;case"(":t=this.group();break}if(t===void 0&&this.isPatternCharacter()&&(t=this.patternCharacter()),Jt(t))return t.loc=this.loc(n),this.isQuantifier()&&(t.quantifier=this.quantifier()),t}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[N(`
`),N("\r"),N("\u2028"),N("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let t,n=!1;switch(this.popChar()){case"d":t=Ze;break;case"D":t=Ze,n=!0;break;case"s":t=_i;break;case"S":t=_i,n=!0;break;case"w":t=Je;break;case"W":t=Je,n=!0;break}if(Jt(t))return{type:"Set",value:t,complement:n}}controlEscapeAtom(){let t;switch(this.popChar()){case"f":t=N("\f");break;case"n":t=N(`
`);break;case"r":t=N("\r");break;case"t":t=N("	");break;case"v":t=N("\v");break}if(Jt(t))return{type:"Character",value:t}}controlLetterEscapeAtom(){this.consumeChar("c");const t=this.popChar();if(/[a-zA-Z]/.test(t)===!1)throw Error("Invalid ");return{type:"Character",value:t.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:N("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){const t=this.popChar();return{type:"Character",value:N(t)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:const t=this.popChar();return{type:"Character",value:N(t)}}}characterClass(){const t=[];let n=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),n=!0);this.isClassAtom();){const r=this.classAtom();if(r.type,Li(r)&&this.isRangeDash()){this.consumeChar("-");const i=this.classAtom();if(i.type,Li(i)){if(i.value<r.value)throw Error("Range out of order in character class");t.push({from:r.value,to:i.value})}else Un(r.value,t),t.push(N("-")),Un(i.value,t)}else Un(r.value,t)}return this.consumeChar("]"),{type:"Set",complement:n,value:t}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:N("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let t=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),t=!1;break;default:this.groupIdx++;break}const n=this.disjunction();this.consumeChar(")");const r={type:"Group",capturing:t,value:n};return t&&(r.idx=this.groupIdx),r}positiveInteger(){let t=this.popChar();if(Nf.test(t)===!1)throw Error("Expecting a positive integer");for(;De.test(this.peekChar(0));)t+=this.popChar();return parseInt(t,10)}integerIncludingZero(){let t=this.popChar();if(De.test(t)===!1)throw Error("Expecting an integer");for(;De.test(this.peekChar(0));)t+=this.popChar();return parseInt(t,10)}patternCharacter(){const t=this.popChar();switch(t){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:N(t)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return De.test(this.peekChar(0))}isClassAtom(t=0){switch(this.peekChar(t)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!"||this.peekChar(2)==="<"&&(this.peekChar(3)==="="||this.peekChar(3)==="!"));default:return!1}}isQuantifier(){const t=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(t)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(t){let n="";for(let i=0;i<t;i++){const s=this.popChar();if(If.test(s)===!1)throw Error("Expecting a HexDecimal digits");n+=s}return{type:"Character",value:parseInt(n,16)}}peekChar(t=0){return this.input[this.idx+t]}popChar(){const t=this.peekChar(0);return this.consumeChar(void 0),t}consumeChar(t){if(t!==void 0&&this.input[this.idx]!==t)throw Error("Expected: '"+t+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(t){return{begin:t,end:this.idx}}}class Ar{visitChildren(t){for(const n in t){const r=t[n];t.hasOwnProperty(n)&&(r.type!==void 0?this.visit(r):Array.isArray(r)&&r.forEach(i=>{this.visit(i)},this))}}visit(t){switch(t.type){case"Pattern":this.visitPattern(t);break;case"Flags":this.visitFlags(t);break;case"Disjunction":this.visitDisjunction(t);break;case"Alternative":this.visitAlternative(t);break;case"StartAnchor":this.visitStartAnchor(t);break;case"EndAnchor":this.visitEndAnchor(t);break;case"WordBoundary":this.visitWordBoundary(t);break;case"NonWordBoundary":this.visitNonWordBoundary(t);break;case"Lookahead":this.visitLookahead(t);break;case"NegativeLookahead":this.visitNegativeLookahead(t);break;case"Lookbehind":this.visitLookbehind(t);break;case"NegativeLookbehind":this.visitNegativeLookbehind(t);break;case"Character":this.visitCharacter(t);break;case"Set":this.visitSet(t);break;case"Group":this.visitGroup(t);break;case"GroupBackReference":this.visitGroupBackReference(t);break;case"Quantifier":this.visitQuantifier(t);break}this.visitChildren(t)}visitPattern(t){}visitFlags(t){}visitDisjunction(t){}visitAlternative(t){}visitStartAnchor(t){}visitEndAnchor(t){}visitWordBoundary(t){}visitNonWordBoundary(t){}visitLookahead(t){}visitNegativeLookahead(t){}visitLookbehind(t){}visitNegativeLookbehind(t){}visitCharacter(t){}visitSet(t){}visitGroup(t){}visitGroupBackReference(t){}visitQuantifier(t){}}let He={};const _f=new Lf;function In(e){const t=e.toString();if(He.hasOwnProperty(t))return He[t];{const n=_f.pattern(t);return He[t]=n,n}}function Cf(){He={}}const vs="Complement Sets are not supported for first char optimization",tn=`Unable to use "first char" lexer optimizations:
`;function yf(e,t=!1){try{const n=In(e);return zn(n.value,{},n.flags.ignoreCase)}catch(n){if(n.message===vs)t&&_s(`${tn}	Unable to optimize: < ${e.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let r="";t&&(r=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),Hn(`${tn}
	Failed parsing: < ${e.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+r)}}return[]}function zn(e,t,n){switch(e.type){case"Disjunction":for(let i=0;i<e.value.length;i++)zn(e.value[i],t,n);break;case"Alternative":const r=e.value;for(let i=0;i<r.length;i++){const s=r[i];switch(s.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"Lookbehind":case"NegativeLookbehind":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}const a=s;switch(a.type){case"Character":Be(a.value,t,n);break;case"Set":if(a.complement===!0)throw Error(vs);I(a.value,c=>{if(typeof c=="number")Be(c,t,n);else{const u=c;if(n===!0)for(let l=u.from;l<=u.to;l++)Be(l,t,n);else{for(let l=u.from;l<=u.to&&l<Ee;l++)Be(l,t,n);if(u.to>=Ee){const l=u.from>=Ee?u.from:Ee,h=u.to,f=Dt(l),p=Dt(h);for(let E=f;E<=p;E++)t[E]=E}}}});break;case"Group":zn(a.value,t,n);break;default:throw Error("Non Exhaustive Match")}const o=a.quantifier!==void 0&&a.quantifier.atLeast===0;if(a.type==="Group"&&Vn(a)===!1||a.type!=="Group"&&o===!1)break}break;default:throw Error("non exhaustive match!")}return U(t)}function Be(e,t,n){const r=Dt(e);t[r]=r,n===!0&&xf(e,t)}function xf(e,t){const n=String.fromCharCode(e),r=n.toUpperCase();if(r!==n){const i=Dt(r.charCodeAt(0));t[i]=i}else{const i=n.toLowerCase();if(i!==n){const s=Dt(i.charCodeAt(0));t[s]=s}}}function Ci(e,t){return re(e.value,n=>{if(typeof n=="number")return W(t,n);{const r=n;return re(t,i=>r.from<=i&&i<=r.to)!==void 0}})}function Vn(e){const t=e.quantifier;return t&&t.atLeast===0?!0:e.value?_(e.value)?lt(e.value,Vn):Vn(e.value):!1}class vf extends Ar{constructor(t){super(),this.targetCharCodes=t,this.found=!1}visitChildren(t){if(this.found!==!0){switch(t.type){case"Lookahead":this.visitLookahead(t);return;case"NegativeLookahead":this.visitNegativeLookahead(t);return;case"Lookbehind":this.visitLookbehind(t);return;case"NegativeLookbehind":this.visitNegativeLookbehind(t);return}super.visitChildren(t)}}visitCharacter(t){W(this.targetCharCodes,t.value)&&(this.found=!0)}visitSet(t){t.complement?Ci(t,this.targetCharCodes)===void 0&&(this.found=!0):Ci(t,this.targetCharCodes)!==void 0&&(this.found=!0)}}function Rr(e,t){if(t instanceof RegExp){const n=In(t),r=new vf(e);return r.visit(n),r.found}else return re(t,n=>W(e,n.charCodeAt(0)))!==void 0}const Yt="PATTERN",me="defaultMode",Ge="modes";let ks=typeof new RegExp("(?:)").sticky=="boolean";function kf(e,t){t=gr(t,{useSticky:ks,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(m,d)=>d()});const n=t.tracer;n("initCharCodeToOptimizedIndexMap",()=>{ed()});let r;n("Reject Lexer.NA",()=>{r=Sn(e,m=>m[Yt]===H.NA)});let i=!1,s;n("Transform Patterns",()=>{i=!1,s=A(r,m=>{const d=m[Yt];if(yt(d)){const T=d.source;return T.length===1&&T!=="^"&&T!=="$"&&T!=="."&&!d.ignoreCase?T:T.length===2&&T[0]==="\\"&&!W(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],T[1])?T[1]:t.useSticky?xi(d):yi(d)}else{if(kt(d))return i=!0,{exec:d};if(typeof d=="object")return i=!0,d;if(typeof d=="string"){if(d.length===1)return d;{const T=d.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),C=new RegExp(T);return t.useSticky?xi(C):yi(C)}}else throw Error("non exhaustive match")}})});let a,o,c,u,l;n("misc mapping",()=>{a=A(r,m=>m.tokenTypeIdx),o=A(r,m=>{const d=m.GROUP;if(d!==H.SKIPPED){if(z(d))return d;if(xt(d))return!1;throw Error("non exhaustive match")}}),c=A(r,m=>{const d=m.LONGER_ALT;if(d)return _(d)?A(d,C=>Oi(r,C)):[Oi(r,d)]}),u=A(r,m=>m.PUSH_MODE),l=A(r,m=>S(m,"POP_MODE"))});let h;n("Line Terminator Handling",()=>{const m=bs(t.lineTerminatorCharacters);h=A(r,d=>!1),t.positionTracking!=="onlyOffset"&&(h=A(r,d=>S(d,"LINE_BREAKS")?!!d.LINE_BREAKS:Ms(d,m)===!1&&Rr(m,d.PATTERN)))});let f,p,E,O;n("Misc Mapping #2",()=>{f=A(r,Ps),p=A(s,Zf),E=q(r,(m,d)=>{const T=d.GROUP;return z(T)&&T!==H.SKIPPED&&(m[T]=[]),m},{}),O=A(s,(m,d)=>({pattern:s[d],longerAlt:c[d],canLineTerminator:h[d],isCustom:f[d],short:p[d],group:o[d],push:u[d],pop:l[d],tokenTypeIdx:a[d],tokenType:r[d]}))});let L=!0,g=[];return t.safeMode||n("First Char Optimization",()=>{g=q(r,(m,d,T)=>{if(typeof d.PATTERN=="string"){const C=d.PATTERN.charCodeAt(0),st=Dt(C);wn(m,st,O[T])}else if(_(d.START_CHARS_HINT)){let C;I(d.START_CHARS_HINT,st=>{const bt=typeof st=="string"?st.charCodeAt(0):st,Kt=Dt(bt);C!==Kt&&(C=Kt,wn(m,Kt,O[T]))})}else if(yt(d.PATTERN))if(d.PATTERN.unicode)L=!1,t.ensureOptimizations&&Hn(`${tn}	Unable to analyze < ${d.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{const C=yf(d.PATTERN,t.ensureOptimizations);x(C)&&(L=!1),I(C,st=>{wn(m,st,O[T])})}else t.ensureOptimizations&&Hn(`${tn}	TokenType: <${d.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),L=!1;return m},[])}),{emptyGroups:E,patternIdxToConfig:O,charCodeToPatternIdxToConfig:g,hasCustom:i,canBeOptimized:L}}function Pf(e,t){let n=[];const r=bf(e);n=n.concat(r.errors);const i=Uf(r.valid),s=i.valid;return n=n.concat(i.errors),n=n.concat(Mf(s)),n=n.concat(Wf(s)),n=n.concat(jf(s,t)),n=n.concat(Hf(s)),n}function Mf(e){let t=[];const n=it(e,r=>yt(r[Yt]));return t=t.concat(Ff(n)),t=t.concat(Bf(n)),t=t.concat(Gf(n)),t=t.concat(Kf(n)),t=t.concat($f(n)),t}function bf(e){const t=it(e,i=>!S(i,Yt)),n=A(t,i=>({message:"Token Type: ->"+i.name+"<- missing static 'PATTERN' property",type:M.MISSING_PATTERN,tokenTypes:[i]})),r=Rn(e,t);return{errors:n,valid:r}}function Uf(e){const t=it(e,i=>{const s=i[Yt];return!yt(s)&&!kt(s)&&!S(s,"exec")&&!z(s)}),n=A(t,i=>({message:"Token Type: ->"+i.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:M.INVALID_PATTERN,tokenTypes:[i]})),r=Rn(e,t);return{errors:n,valid:r}}const wf=/[^\\][$]/;function Ff(e){class t extends Ar{constructor(){super(...arguments),this.found=!1}visitEndAnchor(s){this.found=!0}}const n=it(e,i=>{const s=i.PATTERN;try{const a=In(s),o=new t;return o.visit(a),o.found}catch{return wf.test(s.source)}});return A(n,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:M.EOI_ANCHOR_FOUND,tokenTypes:[i]}))}function $f(e){const t=it(e,r=>r.PATTERN.test(""));return A(t,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' must not match an empty string",type:M.EMPTY_MATCH_PATTERN,tokenTypes:[r]}))}const Df=/[^\\[][\^]|^\^/;function Bf(e){class t extends Ar{constructor(){super(...arguments),this.found=!1}visitStartAnchor(s){this.found=!0}}const n=it(e,i=>{const s=i.PATTERN;try{const a=In(s),o=new t;return o.visit(a),o.found}catch{return Df.test(s.source)}});return A(n,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:M.SOI_ANCHOR_FOUND,tokenTypes:[i]}))}function Gf(e){const t=it(e,r=>{const i=r[Yt];return i instanceof RegExp&&(i.multiline||i.global)});return A(t,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:M.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[r]}))}function Kf(e){const t=[];let n=A(e,s=>q(e,(a,o)=>(s.PATTERN.source===o.PATTERN.source&&!W(t,o)&&o.PATTERN!==H.NA&&(t.push(o),a.push(o)),a),[]));n=Pe(n);const r=it(n,s=>s.length>1);return A(r,s=>{const a=A(s,c=>c.name);return{message:`The same RegExp pattern ->${ft(s).PATTERN}<-has been used in all of the following Token Types: ${a.join(", ")} <-`,type:M.DUPLICATE_PATTERNS_FOUND,tokenTypes:s}})}function Wf(e){const t=it(e,r=>{if(!S(r,"GROUP"))return!1;const i=r.GROUP;return i!==H.SKIPPED&&i!==H.NA&&!z(i)});return A(t,r=>({message:"Token Type: ->"+r.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:M.INVALID_GROUP_TYPE_FOUND,tokenTypes:[r]}))}function jf(e,t){const n=it(e,i=>i.PUSH_MODE!==void 0&&!W(t,i.PUSH_MODE));return A(n,i=>({message:`Token Type: ->${i.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${i.PUSH_MODE}<-which does not exist`,type:M.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[i]}))}function Hf(e){const t=[],n=q(e,(r,i,s)=>{const a=i.PATTERN;return a===H.NA||(z(a)?r.push({str:a,idx:s,tokenType:i}):yt(a)&&Vf(a)&&r.push({str:a.source,idx:s,tokenType:i})),r},[]);return I(e,(r,i)=>{I(n,({str:s,idx:a,tokenType:o})=>{if(i<a&&zf(s,r.PATTERN)){const c=`Token: ->${o.name}<- can never be matched.
Because it appears AFTER the Token Type ->${r.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;t.push({message:c,type:M.UNREACHABLE_PATTERN,tokenTypes:[r,o]})}})}),t}function zf(e,t){if(yt(t)){if(Yf(t))return!1;const n=t.exec(e);return n!==null&&n.index===0}else{if(kt(t))return t(e,0,[],{});if(S(t,"exec"))return t.exec(e,0,[],{});if(typeof t=="string")return t===e;throw Error("non exhaustive match")}}function Vf(e){return re([".","\\","[","]","|","^","$","(",")","?","*","+","{"],n=>e.source.indexOf(n)!==-1)===void 0}function Yf(e){return/(\(\?=)|(\(\?!)|(\(\?<=)|(\(\?<!)/.test(e.source)}function yi(e){const t=e.ignoreCase?"i":"";return new RegExp(`^(?:${e.source})`,t)}function xi(e){const t=e.ignoreCase?"iy":"y";return new RegExp(`${e.source}`,t)}function Xf(e,t,n){const r=[];return S(e,me)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+me+`> property in its definition
`,type:M.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),S(e,Ge)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+Ge+`> property in its definition
`,type:M.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),S(e,Ge)&&S(e,me)&&!S(e.modes,e.defaultMode)&&r.push({message:`A MultiMode Lexer cannot be initialized with a ${me}: <${e.defaultMode}>which does not exist
`,type:M.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),S(e,Ge)&&I(e.modes,(i,s)=>{I(i,(a,o)=>{if(xt(a))r.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${s}> at index: <${o}>
`,type:M.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(S(a,"LONGER_ALT")){const c=_(a.LONGER_ALT)?a.LONGER_ALT:[a.LONGER_ALT];I(c,u=>{!xt(u)&&!W(i,u)&&r.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${u.name}> on token <${a.name}> outside of mode <${s}>
`,type:M.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),r}function qf(e,t,n){const r=[];let i=!1;const s=Pe(ut(U(e.modes))),a=Sn(s,c=>c[Yt]===H.NA),o=bs(n);return t&&I(a,c=>{const u=Ms(c,o);if(u!==!1){const h={message:td(c,u),type:u.issue,tokenType:c};r.push(h)}else S(c,"LINE_BREAKS")?c.LINE_BREAKS===!0&&(i=!0):Rr(o,c.PATTERN)&&(i=!0)}),t&&!i&&r.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:M.NO_LINE_BREAKS_FLAGS}),r}function Qf(e){const t={},n=rt(e);return I(n,r=>{const i=e[r];if(_(i))t[r]=[];else throw Error("non exhaustive match")}),t}function Ps(e){const t=e.PATTERN;if(yt(t))return!1;if(kt(t))return!0;if(S(t,"exec"))return!0;if(z(t))return!1;throw Error("non exhaustive match")}function Zf(e){return z(e)&&e.length===1?e.charCodeAt(0):!1}const Jf={test:function(e){const t=e.length;for(let n=this.lastIndex;n<t;n++){const r=e.charCodeAt(n);if(r===10)return this.lastIndex=n+1,!0;if(r===13)return e.charCodeAt(n+1)===10?this.lastIndex=n+2:this.lastIndex=n+1,!0}return!1},lastIndex:0};function Ms(e,t){if(S(e,"LINE_BREAKS"))return!1;if(yt(e.PATTERN)){try{Rr(t,e.PATTERN)}catch(n){return{issue:M.IDENTIFY_TERMINATOR,errMsg:n.message}}return!1}else{if(z(e.PATTERN))return!1;if(Ps(e))return{issue:M.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function td(e,t){if(t.issue===M.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${e.name}> Token Type
	 Root cause: ${t.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(t.issue===M.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${e.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function bs(e){return A(e,n=>z(n)?n.charCodeAt(0):n)}function wn(e,t,n){e[t]===void 0?e[t]=[n]:e[t].push(n)}const Ee=256;let ze=[];function Dt(e){return e<Ee?e:ze[e]}function ed(){if(x(ze)){ze=new Array(65536);for(let e=0;e<65536;e++)ze[e]=e>255?255+~~(e/255):e}}function be(e,t){const n=e.tokenTypeIdx;return n===t.tokenTypeIdx?!0:t.isParent===!0&&t.categoryMatchesMap[n]===!0}function en(e,t){return e.tokenTypeIdx===t.tokenTypeIdx}let vi=1;const Us={};function Ue(e){const t=nd(e);rd(t),sd(t),id(t),I(t,n=>{n.isParent=n.categoryMatches.length>0})}function nd(e){let t=$(e),n=e,r=!0;for(;r;){n=Pe(ut(A(n,s=>s.CATEGORIES)));const i=Rn(n,t);t=t.concat(i),x(i)?r=!1:n=i}return t}function rd(e){I(e,t=>{Fs(t)||(Us[vi]=t,t.tokenTypeIdx=vi++),ki(t)&&!_(t.CATEGORIES)&&(t.CATEGORIES=[t.CATEGORIES]),ki(t)||(t.CATEGORIES=[]),ad(t)||(t.categoryMatches=[]),od(t)||(t.categoryMatchesMap={})})}function id(e){I(e,t=>{t.categoryMatches=[],I(t.categoryMatchesMap,(n,r)=>{t.categoryMatches.push(Us[r].tokenTypeIdx)})})}function sd(e){I(e,t=>{ws([],t)})}function ws(e,t){I(e,n=>{t.categoryMatchesMap[n.tokenTypeIdx]=!0}),I(t.CATEGORIES,n=>{const r=e.concat(t);W(r,n)||ws(r,n)})}function Fs(e){return S(e,"tokenTypeIdx")}function ki(e){return S(e,"CATEGORIES")}function ad(e){return S(e,"categoryMatches")}function od(e){return S(e,"categoryMatchesMap")}function cd(e){return S(e,"tokenTypeIdx")}const ud={buildUnableToPopLexerModeMessage(e){return`Unable to pop Lexer Mode after encountering Token ->${e.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(e,t,n,r,i,s){return`unexpected character: ->${e.charAt(t)}<- at offset: ${t}, skipped ${n} characters.`}};var M;(function(e){e[e.MISSING_PATTERN=0]="MISSING_PATTERN",e[e.INVALID_PATTERN=1]="INVALID_PATTERN",e[e.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",e[e.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",e[e.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",e[e.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",e[e.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",e[e.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",e[e.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",e[e.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",e[e.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",e[e.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",e[e.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",e[e.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",e[e.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",e[e.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",e[e.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",e[e.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(M||(M={}));const ge={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:ud,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(ge);class H{constructor(t,n=ge){if(this.lexerDefinition=t,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(i,s)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;const a=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${a}--> <${i}>`);const{time:o,value:c}=Cs(s),u=o>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&u(`${a}<-- <${i}> time: ${o}ms`),this.traceInitIndent--,c}else return s()},typeof n=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=X({},ge,n);const r=this.config.traceInitPerf;r===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof r=="number"&&(this.traceInitMaxIdent=r,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let i,s=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===ge.lineTerminatorsPattern)this.config.lineTerminatorsPattern=Jf;else if(this.config.lineTerminatorCharacters===ge.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(n.safeMode&&n.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),_(t)?i={modes:{defaultMode:$(t)},defaultMode:me}:(s=!1,i=$(t))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(Xf(i,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(qf(i,this.trackStartLines,this.config.lineTerminatorCharacters))})),i.modes=i.modes?i.modes:{},I(i.modes,(o,c)=>{i.modes[c]=Sn(o,u=>xt(u))});const a=rt(i.modes);if(I(i.modes,(o,c)=>{this.TRACE_INIT(`Mode: <${c}> processing`,()=>{if(this.modes.push(c),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(Pf(o,a))}),x(this.lexerDefinitionErrors)){Ue(o);let u;this.TRACE_INIT("analyzeTokenTypes",()=>{u=kf(o,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:n.positionTracking,ensureOptimizations:n.ensureOptimizations,safeMode:n.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[c]=u.patternIdxToConfig,this.charCodeToPatternIdxToConfig[c]=u.charCodeToPatternIdxToConfig,this.emptyGroups=X({},this.emptyGroups,u.emptyGroups),this.hasCustom=u.hasCustom||this.hasCustom,this.canModeBeOptimized[c]=u.canBeOptimized}})}),this.defaultMode=i.defaultMode,!x(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){const c=A(this.lexerDefinitionErrors,u=>u.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+c)}I(this.lexerDefinitionWarning,o=>{_s(o.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(ks?(this.chopInput=ee,this.match=this.matchWithTest):(this.updateLastIndex=b,this.match=this.matchWithExec),s&&(this.handleModes=b),this.trackStartLines===!1&&(this.computeNewColumn=ee),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=b),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{const o=q(this.canModeBeOptimized,(c,u,l)=>(u===!1&&c.push(l),c),[]);if(n.ensureOptimizations&&!x(o))throw Error(`Lexer Modes: < ${o.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{Cf()}),this.TRACE_INIT("toFastProperties",()=>{ys(this)})})}tokenize(t,n=this.defaultMode){if(!x(this.lexerDefinitionErrors)){const i=A(this.lexerDefinitionErrors,s=>s.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+i)}return this.tokenizeInternal(t,n)}tokenizeInternal(t,n){let r,i,s,a,o,c,u,l,h,f,p,E,O,L,g;const m=t,d=m.length;let T=0,C=0;const st=this.hasCustom?0:Math.floor(t.length/10),bt=new Array(st),Kt=[];let oe=this.trackStartLines?1:void 0,Ut=this.trackStartLines?1:void 0;const ce=Qf(this.emptyGroups),xa=this.trackStartLines,vn=this.config.lineTerminatorsPattern;let Fe=0,wt=[],ue=[];const le=[],Dr=[];Object.freeze(Dr);let he;function Br(){return wt}function Gr(D){const Z=Dt(D),Zt=ue[Z];return Zt===void 0?Dr:Zt}const va=D=>{if(le.length===1&&D.tokenType.PUSH_MODE===void 0){const Z=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(D);Kt.push({offset:D.startOffset,line:D.startLine,column:D.startColumn,length:D.image.length,message:Z})}else{le.pop();const Z=Vt(le);wt=this.patternIdxToConfig[Z],ue=this.charCodeToPatternIdxToConfig[Z],Fe=wt.length;const Zt=this.canModeBeOptimized[Z]&&this.config.safeMode===!1;ue&&Zt?he=Gr:he=Br}};function Kr(D){le.push(D),ue=this.charCodeToPatternIdxToConfig[D],wt=this.patternIdxToConfig[D],Fe=wt.length,Fe=wt.length;const Z=this.canModeBeOptimized[D]&&this.config.safeMode===!1;ue&&Z?he=Gr:he=Br}Kr.call(this,n);let at;const Wr=this.config.recoveryEnabled;for(;T<d;){c=null;const D=m.charCodeAt(T),Z=he(D),Zt=Z.length;for(r=0;r<Zt;r++){at=Z[r];const Y=at.pattern;u=null;const Nt=at.short;if(Nt!==!1?D===Nt&&(c=Y):at.isCustom===!0?(g=Y.exec(m,T,bt,ce),g!==null?(c=g[0],g.payload!==void 0&&(u=g.payload)):c=null):(this.updateLastIndex(Y,T),c=this.match(Y,t,T)),c!==null){if(o=at.longerAlt,o!==void 0){const Ft=o.length;for(s=0;s<Ft;s++){const Lt=wt[o[s]],Wt=Lt.pattern;if(l=null,Lt.isCustom===!0?(g=Wt.exec(m,T,bt,ce),g!==null?(a=g[0],g.payload!==void 0&&(l=g.payload)):a=null):(this.updateLastIndex(Wt,T),a=this.match(Wt,t,T)),a&&a.length>c.length){c=a,u=l,at=Lt;break}}}break}}if(c!==null){if(h=c.length,f=at.group,f!==void 0&&(p=at.tokenTypeIdx,E=this.createTokenInstance(c,T,p,at.tokenType,oe,Ut,h),this.handlePayload(E,u),f===!1?C=this.addToken(bt,C,E):ce[f].push(E)),t=this.chopInput(t,h),T=T+h,Ut=this.computeNewColumn(Ut,h),xa===!0&&at.canLineTerminator===!0){let Y=0,Nt,Ft;vn.lastIndex=0;do Nt=vn.test(c),Nt===!0&&(Ft=vn.lastIndex-1,Y++);while(Nt===!0);Y!==0&&(oe=oe+Y,Ut=h-Ft,this.updateTokenEndLineColumnLocation(E,f,Ft,Y,oe,Ut,h))}this.handleModes(at,va,Kr,E)}else{const Y=T,Nt=oe,Ft=Ut;let Lt=Wr===!1;for(;Lt===!1&&T<d;)for(t=this.chopInput(t,1),T++,i=0;i<Fe;i++){const Wt=wt[i],kn=Wt.pattern,jr=Wt.short;if(jr!==!1?m.charCodeAt(T)===jr&&(Lt=!0):Wt.isCustom===!0?Lt=kn.exec(m,T,bt,ce)!==null:(this.updateLastIndex(kn,T),Lt=kn.exec(t)!==null),Lt===!0)break}if(O=T-Y,Ut=this.computeNewColumn(Ut,O),L=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(m,Y,O,Nt,Ft,Vt(le)),Kt.push({offset:Y,line:Nt,column:Ft,length:O,message:L}),Wr===!1)break}}return this.hasCustom||(bt.length=C),{tokens:bt,groups:ce,errors:Kt}}handleModes(t,n,r,i){if(t.pop===!0){const s=t.push;n(i),s!==void 0&&r.call(this,s)}else t.push!==void 0&&r.call(this,t.push)}chopInput(t,n){return t.substring(n)}updateLastIndex(t,n){t.lastIndex=n}updateTokenEndLineColumnLocation(t,n,r,i,s,a,o){let c,u;n!==void 0&&(c=r===o-1,u=c?-1:0,i===1&&c===!0||(t.endLine=s+u,t.endColumn=a-1+-u))}computeNewColumn(t,n){return t+n}createOffsetOnlyToken(t,n,r,i){return{image:t,startOffset:n,tokenTypeIdx:r,tokenType:i}}createStartOnlyToken(t,n,r,i,s,a){return{image:t,startOffset:n,startLine:s,startColumn:a,tokenTypeIdx:r,tokenType:i}}createFullToken(t,n,r,i,s,a,o){return{image:t,startOffset:n,endOffset:n+o-1,startLine:s,endLine:s,startColumn:a,endColumn:a+o-1,tokenTypeIdx:r,tokenType:i}}addTokenUsingPush(t,n,r){return t.push(r),n}addTokenUsingMemberAccess(t,n,r){return t[n]=r,n++,n}handlePayloadNoCustom(t,n){}handlePayloadWithCustom(t,n){n!==null&&(t.payload=n)}matchWithTest(t,n,r){return t.test(n)===!0?n.substring(r,t.lastIndex):null}matchWithExec(t,n){const r=t.exec(n);return r!==null?r[0]:null}}H.SKIPPED="This marks a skipped Token pattern, this means each token identified by it will be consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.";H.NA=/NOT_APPLICABLE/;function Ae(e){return $s(e)?e.LABEL:e.name}function $s(e){return z(e.LABEL)&&e.LABEL!==""}const ld="parent",Pi="categories",Mi="label",bi="group",Ui="push_mode",wi="pop_mode",Fi="longer_alt",$i="line_breaks",Di="start_chars_hint";function R(e){return hd(e)}function hd(e){const t=e.pattern,n={};if(n.name=e.name,xt(t)||(n.PATTERN=t),S(e,ld))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return S(e,Pi)&&(n.CATEGORIES=e[Pi]),Ue([n]),S(e,Mi)&&(n.LABEL=e[Mi]),S(e,bi)&&(n.GROUP=e[bi]),S(e,wi)&&(n.POP_MODE=e[wi]),S(e,Ui)&&(n.PUSH_MODE=e[Ui]),S(e,Fi)&&(n.LONGER_ALT=e[Fi]),S(e,$i)&&(n.LINE_BREAKS=e[$i]),S(e,Di)&&(n.START_CHARS_HINT=e[Di]),n}const G=R({name:"EOF",pattern:H.NA});Ue([G]);function Ht(e,t,n,r,i,s,a,o){return{image:t,startOffset:n,endOffset:r,startLine:i,endLine:s,startColumn:a,endColumn:o,tokenTypeIdx:e.tokenTypeIdx,tokenType:e}}function fd(e,t){return be(e,t)}const Ds={buildMismatchTokenMessage({expected:e,actual:t,previous:n,ruleName:r}){return`Expecting ${$s(e)?`--> ${Ae(e)} <--`:`token of type --> ${e.name} <--`} but found --> '${t.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:e,ruleName:t}){return"Redundant input, expecting EOF but found: "+e.image},buildNoViableAltMessage({expectedPathsPerAlt:e,actual:t,previous:n,customUserDescription:r,ruleName:i}){const s="Expecting: ",o=`
but found: '`+ft(t).image+"'";if(r)return s+r+o;{const c=q(e,(f,p)=>f.concat(p),[]),u=A(c,f=>`[${A(f,p=>Ae(p)).join(", ")}]`),h=`one of these possible Token sequences:
${A(u,(f,p)=>`  ${p+1}. ${f}`).join(`
`)}`;return s+h+o}},buildEarlyExitMessage({expectedIterationPaths:e,actual:t,customUserDescription:n,ruleName:r}){const i="Expecting: ",a=`
but found: '`+ft(t).image+"'";if(n)return i+n+a;{const c=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${A(e,u=>`[${A(u,l=>Ae(l)).join(",")}]`).join(" ,")}>`;return i+c+a}}};Object.freeze(Ds);const dd={buildRuleNotFoundError(e,t){return"Invalid grammar, reference to a rule which is not defined: ->"+t.nonTerminalName+`<-
inside top level rule: ->`+e.name+"<-"}},jt={buildDuplicateFoundError(e,t){function n(l){return l instanceof k?l.terminalType.name:l instanceof Q?l.nonTerminalName:""}const r=e.name,i=ft(t),s=i.idx,a=Et(i),o=n(i),c=s>0;let u=`->${a}${c?s:""}<- ${o?`with argument: ->${o}<-`:""}
                  appears more than once (${t.length} times) in the top level rule: ->${r}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return u=u.replace(/[ \t]+/g," "),u=u.replace(/\s\s+/g,`
`),u},buildNamespaceConflictError(e){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${e.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(e){const t=A(e.prefixPath,i=>Ae(i)).join(", "),n=e.alternation.idx===0?"":e.alternation.idx;return`Ambiguous alternatives: <${e.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${n}> inside <${e.topLevelRule.name}> Rule,
<${t}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(e){const t=A(e.prefixPath,i=>Ae(i)).join(", "),n=e.alternation.idx===0?"":e.alternation.idx;let r=`Ambiguous Alternatives Detected: <${e.ambiguityIndices.join(" ,")}> in <OR${n}> inside <${e.topLevelRule.name}> Rule,
<${t}> may appears as a prefix path in all these alternatives.
`;return r=r+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,r},buildEmptyRepetitionError(e){let t=Et(e.repetition);return e.repetition.idx!==0&&(t+=e.repetition.idx),`The repetition <${t}> within Rule <${e.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(e){return"deprecated"},buildEmptyAlternationError(e){return`Ambiguous empty alternative: <${e.emptyChoiceIdx+1}> in <OR${e.alternation.idx}> inside <${e.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(e){return`An Alternation cannot have more than 256 alternatives:
<OR${e.alternation.idx}> inside <${e.topLevelRule.name}> Rule.
 has ${e.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(e){const t=e.topLevelRule.name,n=A(e.leftRecursionPath,s=>s.name),r=`${t} --> ${n.concat([t]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${t}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${r}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(e){return"deprecated"},buildDuplicateRuleNameError(e){let t;return e.topLevelRule instanceof se?t=e.topLevelRule.name:t=e.topLevelRule,`Duplicate definition, rule: ->${t}<- is already defined in the grammar: ->${e.grammarName}<-`}};function pd(e,t){const n=new md(e,t);return n.resolveRefs(),n.errors}class md extends ae{constructor(t,n){super(),this.nameToTopRule=t,this.errMsgProvider=n,this.errors=[]}resolveRefs(){I(U(this.nameToTopRule),t=>{this.currTopLevel=t,t.accept(this)})}visitNonTerminal(t){const n=this.nameToTopRule[t.nonTerminalName];if(n)t.referencedRule=n;else{const r=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,t);this.errors.push({message:r,type:K.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:t.nonTerminalName})}}}class Ed extends On{constructor(t,n){super(),this.topProd=t,this.path=n,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=$(this.path.ruleStack).reverse(),this.occurrenceStack=$(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(t,n=[]){this.found||super.walk(t,n)}walkProdRef(t,n,r){if(t.referencedRule.name===this.nextProductionName&&t.idx===this.nextProductionOccurrence){const i=n.concat(r);this.updateExpectedNext(),this.walk(t.referencedRule,i)}}updateExpectedNext(){x(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}}class gd extends Ed{constructor(t,n){super(t,n),this.path=n,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(t,n,r){if(this.isAtEndOfPath&&t.terminalType.name===this.nextTerminalName&&t.idx===this.nextTerminalOccurrence&&!this.found){const i=n.concat(r),s=new V({definition:i});this.possibleTokTypes=Me(s),this.found=!0}}}class Nn extends On{constructor(t,n){super(),this.topRule=t,this.occurrence=n,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}}class Td extends Nn{walkMany(t,n,r){if(t.idx===this.occurrence){const i=ft(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof k&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkMany(t,n,r)}}class Bi extends Nn{walkManySep(t,n,r){if(t.idx===this.occurrence){const i=ft(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof k&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkManySep(t,n,r)}}class Ad extends Nn{walkAtLeastOne(t,n,r){if(t.idx===this.occurrence){const i=ft(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof k&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOne(t,n,r)}}class Gi extends Nn{walkAtLeastOneSep(t,n,r){if(t.idx===this.occurrence){const i=ft(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof k&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOneSep(t,n,r)}}function Yn(e,t,n=[]){n=$(n);let r=[],i=0;function s(o){return o.concat(F(e,i+1))}function a(o){const c=Yn(s(o),t,n);return r.concat(c)}for(;n.length<t&&i<e.length;){const o=e[i];if(o instanceof V)return a(o.definition);if(o instanceof Q)return a(o.definition);if(o instanceof j)r=a(o.definition);else if(o instanceof Ot){const c=o.definition.concat([new w({definition:o.definition})]);return a(c)}else if(o instanceof It){const c=[new V({definition:o.definition}),new w({definition:[new k({terminalType:o.separator})].concat(o.definition)})];return a(c)}else if(o instanceof pt){const c=o.definition.concat([new w({definition:[new k({terminalType:o.separator})].concat(o.definition)})]);r=a(c)}else if(o instanceof w){const c=o.definition.concat([new w({definition:o.definition})]);r=a(c)}else{if(o instanceof mt)return I(o.definition,c=>{x(c.definition)===!1&&(r=a(c.definition))}),r;if(o instanceof k)n.push(o.terminalType);else throw Error("non exhaustive match")}i++}return r.push({partialPath:n,suffixDef:F(e,i)}),r}function Bs(e,t,n,r){const i="EXIT_NONE_TERMINAL",s=[i],a="EXIT_ALTERNATIVE";let o=!1;const c=t.length,u=c-r-1,l=[],h=[];for(h.push({idx:-1,def:e,ruleStack:[],occurrenceStack:[]});!x(h);){const f=h.pop();if(f===a){o&&Vt(h).idx<=u&&h.pop();continue}const p=f.def,E=f.idx,O=f.ruleStack,L=f.occurrenceStack;if(x(p))continue;const g=p[0];if(g===i){const m={idx:E,def:F(p),ruleStack:Ne(O),occurrenceStack:Ne(L)};h.push(m)}else if(g instanceof k)if(E<c-1){const m=E+1,d=t[m];if(n(d,g.terminalType)){const T={idx:m,def:F(p),ruleStack:O,occurrenceStack:L};h.push(T)}}else if(E===c-1)l.push({nextTokenType:g.terminalType,nextTokenOccurrence:g.idx,ruleStack:O,occurrenceStack:L}),o=!0;else throw Error("non exhaustive match");else if(g instanceof Q){const m=$(O);m.push(g.nonTerminalName);const d=$(L);d.push(g.idx);const T={idx:E,def:g.definition.concat(s,F(p)),ruleStack:m,occurrenceStack:d};h.push(T)}else if(g instanceof j){const m={idx:E,def:F(p),ruleStack:O,occurrenceStack:L};h.push(m),h.push(a);const d={idx:E,def:g.definition.concat(F(p)),ruleStack:O,occurrenceStack:L};h.push(d)}else if(g instanceof Ot){const m=new w({definition:g.definition,idx:g.idx}),d=g.definition.concat([m],F(p)),T={idx:E,def:d,ruleStack:O,occurrenceStack:L};h.push(T)}else if(g instanceof It){const m=new k({terminalType:g.separator}),d=new w({definition:[m].concat(g.definition),idx:g.idx}),T=g.definition.concat([d],F(p)),C={idx:E,def:T,ruleStack:O,occurrenceStack:L};h.push(C)}else if(g instanceof pt){const m={idx:E,def:F(p),ruleStack:O,occurrenceStack:L};h.push(m),h.push(a);const d=new k({terminalType:g.separator}),T=new w({definition:[d].concat(g.definition),idx:g.idx}),C=g.definition.concat([T],F(p)),st={idx:E,def:C,ruleStack:O,occurrenceStack:L};h.push(st)}else if(g instanceof w){const m={idx:E,def:F(p),ruleStack:O,occurrenceStack:L};h.push(m),h.push(a);const d=new w({definition:g.definition,idx:g.idx}),T=g.definition.concat([d],F(p)),C={idx:E,def:T,ruleStack:O,occurrenceStack:L};h.push(C)}else if(g instanceof mt)for(let m=g.definition.length-1;m>=0;m--){const d=g.definition[m],T={idx:E,def:d.definition.concat(F(p)),ruleStack:O,occurrenceStack:L};h.push(T),h.push(a)}else if(g instanceof V)h.push({idx:E,def:g.definition.concat(F(p)),ruleStack:O,occurrenceStack:L});else if(g instanceof se)h.push(Rd(g,E,O,L));else throw Error("non exhaustive match")}return l}function Rd(e,t,n,r){const i=$(n);i.push(e.name);const s=$(r);return s.push(1),{idx:t,def:e.definition,ruleStack:i,occurrenceStack:s}}var P;(function(e){e[e.OPTION=0]="OPTION",e[e.REPETITION=1]="REPETITION",e[e.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",e[e.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",e[e.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",e[e.ALTERNATION=5]="ALTERNATION"})(P||(P={}));function Gs(e){if(e instanceof j||e==="Option")return P.OPTION;if(e instanceof w||e==="Repetition")return P.REPETITION;if(e instanceof Ot||e==="RepetitionMandatory")return P.REPETITION_MANDATORY;if(e instanceof It||e==="RepetitionMandatoryWithSeparator")return P.REPETITION_MANDATORY_WITH_SEPARATOR;if(e instanceof pt||e==="RepetitionWithSeparator")return P.REPETITION_WITH_SEPARATOR;if(e instanceof mt||e==="Alternation")return P.ALTERNATION;throw Error("non exhaustive match")}function Sd(e,t,n,r,i,s){const a=Sr(e,t,n),o=js(a)?en:be;return s(a,r,o,i)}function Od(e,t,n,r,i,s){const a=Or(e,t,i,n),o=js(a)?en:be;return s(a[0],o,r)}function Id(e,t,n,r){const i=e.length,s=lt(e,a=>lt(a,o=>o.length===1));if(t)return function(a){const o=A(a,c=>c.GATE);for(let c=0;c<i;c++){const u=e[c],l=u.length,h=o[c];if(!(h!==void 0&&h.call(this)===!1))t:for(let f=0;f<l;f++){const p=u[f],E=p.length;for(let O=0;O<E;O++){const L=this.LA(O+1);if(n(L,p[O])===!1)continue t}return c}}};if(s&&!r){const a=A(e,c=>ut(c)),o=q(a,(c,u,l)=>(I(u,h=>{S(c,h.tokenTypeIdx)||(c[h.tokenTypeIdx]=l),I(h.categoryMatches,f=>{S(c,f)||(c[f]=l)})}),c),{});return function(){const c=this.LA(1);return o[c.tokenTypeIdx]}}else return function(){for(let a=0;a<i;a++){const o=e[a],c=o.length;t:for(let u=0;u<c;u++){const l=o[u],h=l.length;for(let f=0;f<h;f++){const p=this.LA(f+1);if(n(p,l[f])===!1)continue t}return a}}}}function Nd(e,t,n){const r=lt(e,s=>s.length===1),i=e.length;if(r&&!n){const s=ut(e);if(s.length===1&&x(s[0].categoryMatches)){const o=s[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===o}}else{const a=q(s,(o,c,u)=>(o[c.tokenTypeIdx]=!0,I(c.categoryMatches,l=>{o[l]=!0}),o),[]);return function(){const o=this.LA(1);return a[o.tokenTypeIdx]===!0}}}else return function(){t:for(let s=0;s<i;s++){const a=e[s],o=a.length;for(let c=0;c<o;c++){const u=this.LA(c+1);if(t(u,a[c])===!1)continue t}return!0}return!1}}class Ld extends On{constructor(t,n,r){super(),this.topProd=t,this.targetOccurrence=n,this.targetProdType=r}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(t,n,r,i){return t.idx===this.targetOccurrence&&this.targetProdType===n?(this.restDef=r.concat(i),!0):!1}walkOption(t,n,r){this.checkIsTarget(t,P.OPTION,n,r)||super.walkOption(t,n,r)}walkAtLeastOne(t,n,r){this.checkIsTarget(t,P.REPETITION_MANDATORY,n,r)||super.walkOption(t,n,r)}walkAtLeastOneSep(t,n,r){this.checkIsTarget(t,P.REPETITION_MANDATORY_WITH_SEPARATOR,n,r)||super.walkOption(t,n,r)}walkMany(t,n,r){this.checkIsTarget(t,P.REPETITION,n,r)||super.walkOption(t,n,r)}walkManySep(t,n,r){this.checkIsTarget(t,P.REPETITION_WITH_SEPARATOR,n,r)||super.walkOption(t,n,r)}}class Ks extends ae{constructor(t,n,r){super(),this.targetOccurrence=t,this.targetProdType=n,this.targetRef=r,this.result=[]}checkIsTarget(t,n){t.idx===this.targetOccurrence&&this.targetProdType===n&&(this.targetRef===void 0||t===this.targetRef)&&(this.result=t.definition)}visitOption(t){this.checkIsTarget(t,P.OPTION)}visitRepetition(t){this.checkIsTarget(t,P.REPETITION)}visitRepetitionMandatory(t){this.checkIsTarget(t,P.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(t){this.checkIsTarget(t,P.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(t){this.checkIsTarget(t,P.REPETITION_WITH_SEPARATOR)}visitAlternation(t){this.checkIsTarget(t,P.ALTERNATION)}}function Ki(e){const t=new Array(e);for(let n=0;n<e;n++)t[n]=[];return t}function Fn(e){let t=[""];for(let n=0;n<e.length;n++){const r=e[n],i=[];for(let s=0;s<t.length;s++){const a=t[s];i.push(a+"_"+r.tokenTypeIdx);for(let o=0;o<r.categoryMatches.length;o++){const c="_"+r.categoryMatches[o];i.push(a+c)}}t=i}return t}function _d(e,t,n){for(let r=0;r<e.length;r++){if(r===n)continue;const i=e[r];for(let s=0;s<t.length;s++){const a=t[s];if(i[a]===!0)return!1}}return!0}function Ws(e,t){const n=A(e,a=>Yn([a],1)),r=Ki(n.length),i=A(n,a=>{const o={};return I(a,c=>{const u=Fn(c.partialPath);I(u,l=>{o[l]=!0})}),o});let s=n;for(let a=1;a<=t;a++){const o=s;s=Ki(o.length);for(let c=0;c<o.length;c++){const u=o[c];for(let l=0;l<u.length;l++){const h=u[l].partialPath,f=u[l].suffixDef,p=Fn(h);if(_d(i,p,c)||x(f)||h.length===t){const O=r[c];if(Xn(O,h)===!1){O.push(h);for(let L=0;L<p.length;L++){const g=p[L];i[c][g]=!0}}}else{const O=Yn(f,a+1,h);s[c]=s[c].concat(O),I(O,L=>{const g=Fn(L.partialPath);I(g,m=>{i[c][m]=!0})})}}}}return r}function Sr(e,t,n,r){const i=new Ks(e,P.ALTERNATION,r);return t.accept(i),Ws(i.result,n)}function Or(e,t,n,r){const i=new Ks(e,n);t.accept(i);const s=i.result,o=new Ld(t,e,n).startWalking(),c=new V({definition:s}),u=new V({definition:o});return Ws([c,u],r)}function Xn(e,t){t:for(let n=0;n<e.length;n++){const r=e[n];if(r.length===t.length){for(let i=0;i<r.length;i++){const s=t[i],a=r[i];if((s===a||a.categoryMatchesMap[s.tokenTypeIdx]!==void 0)===!1)continue t}return!0}}return!1}function Cd(e,t){return e.length<t.length&&lt(e,(n,r)=>{const i=t[r];return n===i||i.categoryMatchesMap[n.tokenTypeIdx]})}function js(e){return lt(e,t=>lt(t,n=>lt(n,r=>x(r.categoryMatches))))}function yd(e){const t=e.lookaheadStrategy.validate({rules:e.rules,tokenTypes:e.tokenTypes,grammarName:e.grammarName});return A(t,n=>Object.assign({type:K.CUSTOM_LOOKAHEAD_VALIDATION},n))}function xd(e,t,n,r){const i=tt(e,c=>vd(c,n)),s=Kd(e,t,n),a=tt(e,c=>$d(c,n)),o=tt(e,c=>Md(c,e,r,n));return i.concat(s,a,o)}function vd(e,t){const n=new Pd;e.accept(n);const r=n.allProductions,i=Gh(r,kd),s=dt(i,o=>o.length>1);return A(U(s),o=>{const c=ft(o),u=t.buildDuplicateFoundError(e,o),l=Et(c),h={message:u,type:K.DUPLICATE_PRODUCTIONS,ruleName:e.name,dslName:l,occurrence:c.idx},f=Hs(c);return f&&(h.parameter=f),h})}function kd(e){return`${Et(e)}_#_${e.idx}_#_${Hs(e)}`}function Hs(e){return e instanceof k?e.terminalType.name:e instanceof Q?e.nonTerminalName:""}class Pd extends ae{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(t){this.allProductions.push(t)}visitOption(t){this.allProductions.push(t)}visitRepetitionWithSeparator(t){this.allProductions.push(t)}visitRepetitionMandatory(t){this.allProductions.push(t)}visitRepetitionMandatoryWithSeparator(t){this.allProductions.push(t)}visitRepetition(t){this.allProductions.push(t)}visitAlternation(t){this.allProductions.push(t)}visitTerminal(t){this.allProductions.push(t)}}function Md(e,t,n,r){const i=[];if(q(t,(a,o)=>o.name===e.name?a+1:a,0)>1){const a=r.buildDuplicateRuleNameError({topLevelRule:e,grammarName:n});i.push({message:a,type:K.DUPLICATE_RULE_NAME,ruleName:e.name})}return i}function bd(e,t,n){const r=[];let i;return W(t,e)||(i=`Invalid rule override, rule: ->${e}<- cannot be overridden in the grammar: ->${n}<-as it is not defined in any of the super grammars `,r.push({message:i,type:K.INVALID_RULE_OVERRIDE,ruleName:e})),r}function zs(e,t,n,r=[]){const i=[],s=Ve(t.definition);if(x(s))return[];{const a=e.name;W(s,e)&&i.push({message:n.buildLeftRecursionError({topLevelRule:e,leftRecursionPath:r}),type:K.LEFT_RECURSION,ruleName:a});const c=Rn(s,r.concat([e])),u=tt(c,l=>{const h=$(r);return h.push(l),zs(e,l,n,h)});return i.concat(u)}}function Ve(e){let t=[];if(x(e))return t;const n=ft(e);if(n instanceof Q)t.push(n.referencedRule);else if(n instanceof V||n instanceof j||n instanceof Ot||n instanceof It||n instanceof pt||n instanceof w)t=t.concat(Ve(n.definition));else if(n instanceof mt)t=ut(A(n.definition,s=>Ve(s.definition)));else if(!(n instanceof k))throw Error("non exhaustive match");const r=Qe(n),i=e.length>1;if(r&&i){const s=F(e);return t.concat(Ve(s))}else return t}class Ir extends ae{constructor(){super(...arguments),this.alternations=[]}visitAlternation(t){this.alternations.push(t)}}function Ud(e,t){const n=new Ir;e.accept(n);const r=n.alternations;return tt(r,s=>{const a=Ne(s.definition);return tt(a,(o,c)=>{const u=Bs([o],[],be,1);return x(u)?[{message:t.buildEmptyAlternationError({topLevelRule:e,alternation:s,emptyChoiceIdx:c}),type:K.NONE_LAST_EMPTY_ALT,ruleName:e.name,occurrence:s.idx,alternative:c+1}]:[]})})}function wd(e,t,n){const r=new Ir;e.accept(r);let i=r.alternations;return i=Sn(i,a=>a.ignoreAmbiguities===!0),tt(i,a=>{const o=a.idx,c=a.maxLookahead||t,u=Sr(o,e,c,a),l=Bd(u,a,e,n),h=Gd(u,a,e,n);return l.concat(h)})}class Fd extends ae{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(t){this.allProductions.push(t)}visitRepetitionMandatory(t){this.allProductions.push(t)}visitRepetitionMandatoryWithSeparator(t){this.allProductions.push(t)}visitRepetition(t){this.allProductions.push(t)}}function $d(e,t){const n=new Ir;e.accept(n);const r=n.alternations;return tt(r,s=>s.definition.length>255?[{message:t.buildTooManyAlternativesError({topLevelRule:e,alternation:s}),type:K.TOO_MANY_ALTS,ruleName:e.name,occurrence:s.idx}]:[])}function Dd(e,t,n){const r=[];return I(e,i=>{const s=new Fd;i.accept(s);const a=s.allProductions;I(a,o=>{const c=Gs(o),u=o.maxLookahead||t,l=o.idx,f=Or(l,i,c,u)[0];if(x(ut(f))){const p=n.buildEmptyRepetitionError({topLevelRule:i,repetition:o});r.push({message:p,type:K.NO_NON_EMPTY_LOOKAHEAD,ruleName:i.name})}})}),r}function Bd(e,t,n,r){const i=[],s=q(e,(o,c,u)=>(t.definition[u].ignoreAmbiguities===!0||I(c,l=>{const h=[u];I(e,(f,p)=>{u!==p&&Xn(f,l)&&t.definition[p].ignoreAmbiguities!==!0&&h.push(p)}),h.length>1&&!Xn(i,l)&&(i.push(l),o.push({alts:h,path:l}))}),o),[]);return A(s,o=>{const c=A(o.alts,l=>l+1);return{message:r.buildAlternationAmbiguityError({topLevelRule:n,alternation:t,ambiguityIndices:c,prefixPath:o.path}),type:K.AMBIGUOUS_ALTS,ruleName:n.name,occurrence:t.idx,alternatives:o.alts}})}function Gd(e,t,n,r){const i=q(e,(a,o,c)=>{const u=A(o,l=>({idx:c,path:l}));return a.concat(u)},[]);return Pe(tt(i,a=>{if(t.definition[a.idx].ignoreAmbiguities===!0)return[];const c=a.idx,u=a.path,l=it(i,f=>t.definition[f.idx].ignoreAmbiguities!==!0&&f.idx<c&&Cd(f.path,u));return A(l,f=>{const p=[f.idx+1,c+1],E=t.idx===0?"":t.idx;return{message:r.buildAlternationPrefixAmbiguityError({topLevelRule:n,alternation:t,ambiguityIndices:p,prefixPath:f.path}),type:K.AMBIGUOUS_PREFIX_ALTS,ruleName:n.name,occurrence:E,alternatives:p}})}))}function Kd(e,t,n){const r=[],i=A(t,s=>s.name);return I(e,s=>{const a=s.name;if(W(i,a)){const o=n.buildNamespaceConflictError(s);r.push({message:o,type:K.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:a})}}),r}function Wd(e){const t=gr(e,{errMsgProvider:dd}),n={};return I(e.rules,r=>{n[r.name]=r}),pd(n,t.errMsgProvider)}function jd(e){return e=gr(e,{errMsgProvider:jt}),xd(e.rules,e.tokenTypes,e.errMsgProvider,e.grammarName)}const Vs="MismatchedTokenException",Ys="NoViableAltException",Xs="EarlyExitException",qs="NotAllInputParsedException",Qs=[Vs,Ys,Xs,qs];Object.freeze(Qs);function nn(e){return W(Qs,e.name)}class Ln extends Error{constructor(t,n){super(t),this.token=n,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class ot extends Ln{constructor(t,n,r){super(t,n),this.previousToken=r,this.name=Vs}}class Hd extends Ln{constructor(t,n,r){super(t,n),this.previousToken=r,this.name=Ys}}class zd extends Ln{constructor(t,n){super(t,n),this.name=qs}}class Vd extends Ln{constructor(t,n,r){super(t,n),this.previousToken=r,this.name=Xs}}const $n={},Zs="InRuleRecoveryException";class Yd extends Error{constructor(t){super(t),this.name=Zs}}class Xd{initRecoverable(t){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=S(t,"recoveryEnabled")?t.recoveryEnabled:vt.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=qd)}getTokenToInsert(t){const n=Ht(t,"",NaN,NaN,NaN,NaN,NaN,NaN);return n.isInsertedInRecovery=!0,n}canTokenTypeBeInsertedInRecovery(t){return!0}canTokenTypeBeDeletedInRecovery(t){return!0}tryInRepetitionRecovery(t,n,r,i){const s=this.findReSyncTokenType(),a=this.exportLexerState(),o=[];let c=!1;const u=this.LA(1);let l=this.LA(1);const h=()=>{const f=this.LA(0),p=this.errorMessageProvider.buildMismatchTokenMessage({expected:i,actual:u,previous:f,ruleName:this.getCurrRuleFullName()}),E=new ot(p,u,this.LA(0));E.resyncedTokens=Ne(o),this.SAVE_ERROR(E)};for(;!c;)if(this.tokenMatcher(l,i)){h();return}else if(r.call(this)){h(),t.apply(this,n);return}else this.tokenMatcher(l,s)?c=!0:(l=this.SKIP_TOKEN(),this.addToResyncTokens(l,o));this.importLexerState(a)}shouldInRepetitionRecoveryBeTried(t,n,r){return!(r===!1||this.tokenMatcher(this.LA(1),t)||this.isBackTracking()||this.canPerformInRuleRecovery(t,this.getFollowsForInRuleRecovery(t,n)))}getFollowsForInRuleRecovery(t,n){const r=this.getCurrentGrammarPath(t,n);return this.getNextPossibleTokenTypes(r)}tryInRuleRecovery(t,n){if(this.canRecoverWithSingleTokenInsertion(t,n))return this.getTokenToInsert(t);if(this.canRecoverWithSingleTokenDeletion(t)){const r=this.SKIP_TOKEN();return this.consumeToken(),r}throw new Yd("sad sad panda")}canPerformInRuleRecovery(t,n){return this.canRecoverWithSingleTokenInsertion(t,n)||this.canRecoverWithSingleTokenDeletion(t)}canRecoverWithSingleTokenInsertion(t,n){if(!this.canTokenTypeBeInsertedInRecovery(t)||x(n))return!1;const r=this.LA(1);return re(n,s=>this.tokenMatcher(r,s))!==void 0}canRecoverWithSingleTokenDeletion(t){return this.canTokenTypeBeDeletedInRecovery(t)?this.tokenMatcher(this.LA(2),t):!1}isInCurrentRuleReSyncSet(t){const n=this.getCurrFollowKey(),r=this.getFollowSetFromFollowKey(n);return W(r,t)}findReSyncTokenType(){const t=this.flattenFollowSet();let n=this.LA(1),r=2;for(;;){const i=re(t,s=>fd(n,s));if(i!==void 0)return i;n=this.LA(r),r++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return $n;const t=this.getLastExplicitRuleShortName(),n=this.getLastExplicitRuleOccurrenceIndex(),r=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(t),idxInCallingRule:n,inRule:this.shortRuleNameToFullName(r)}}buildFullFollowKeyStack(){const t=this.RULE_STACK,n=this.RULE_OCCURRENCE_STACK;return A(t,(r,i)=>i===0?$n:{ruleName:this.shortRuleNameToFullName(r),idxInCallingRule:n[i],inRule:this.shortRuleNameToFullName(t[i-1])})}flattenFollowSet(){const t=A(this.buildFullFollowKeyStack(),n=>this.getFollowSetFromFollowKey(n));return ut(t)}getFollowSetFromFollowKey(t){if(t===$n)return[G];const n=t.ruleName+t.idxInCallingRule+xs+t.inRule;return this.resyncFollows[n]}addToResyncTokens(t,n){return this.tokenMatcher(t,G)||n.push(t),n}reSyncTo(t){const n=[];let r=this.LA(1);for(;this.tokenMatcher(r,t)===!1;)r=this.SKIP_TOKEN(),this.addToResyncTokens(r,n);return Ne(n)}attemptInRepetitionRecovery(t,n,r,i,s,a,o){}getCurrentGrammarPath(t,n){const r=this.getHumanReadableRuleStack(),i=$(this.RULE_OCCURRENCE_STACK);return{ruleStack:r,occurrenceStack:i,lastTok:t,lastTokOccurrence:n}}getHumanReadableRuleStack(){return A(this.RULE_STACK,t=>this.shortRuleNameToFullName(t))}}function qd(e,t,n,r,i,s,a){const o=this.getKeyForAutomaticLookahead(r,i);let c=this.firstAfterRepMap[o];if(c===void 0){const f=this.getCurrRuleFullName(),p=this.getGAstProductions()[f];c=new s(p,i).startWalking(),this.firstAfterRepMap[o]=c}let u=c.token,l=c.occurrence;const h=c.isEndOfRule;this.RULE_STACK.length===1&&h&&u===void 0&&(u=G,l=1),!(u===void 0||l===void 0)&&this.shouldInRepetitionRecoveryBeTried(u,l,a)&&this.tryInRepetitionRecovery(e,t,n,u)}const Qd=4,Gt=8,Js=1<<Gt,ta=2<<Gt,qn=3<<Gt,Qn=4<<Gt,Zn=5<<Gt,Ye=6<<Gt;function Dn(e,t,n){return n|t|e}class Zd{constructor(t){var n;this.maxLookahead=(n=t?.maxLookahead)!==null&&n!==void 0?n:vt.maxLookahead}validate(t){const n=this.validateNoLeftRecursion(t.rules);if(x(n)){const r=this.validateEmptyOrAlternatives(t.rules),i=this.validateAmbiguousAlternationAlternatives(t.rules,this.maxLookahead),s=this.validateSomeNonEmptyLookaheadPath(t.rules,this.maxLookahead);return[...n,...r,...i,...s]}return n}validateNoLeftRecursion(t){return tt(t,n=>zs(n,n,jt))}validateEmptyOrAlternatives(t){return tt(t,n=>Ud(n,jt))}validateAmbiguousAlternationAlternatives(t,n){return tt(t,r=>wd(r,n,jt))}validateSomeNonEmptyLookaheadPath(t,n){return Dd(t,n,jt)}buildLookaheadForAlternation(t){return Sd(t.prodOccurrence,t.rule,t.maxLookahead,t.hasPredicates,t.dynamicTokensEnabled,Id)}buildLookaheadForOptional(t){return Od(t.prodOccurrence,t.rule,t.maxLookahead,t.dynamicTokensEnabled,Gs(t.prodType),Nd)}}class Jd{initLooksAhead(t){this.dynamicTokensEnabled=S(t,"dynamicTokensEnabled")?t.dynamicTokensEnabled:vt.dynamicTokensEnabled,this.maxLookahead=S(t,"maxLookahead")?t.maxLookahead:vt.maxLookahead,this.lookaheadStrategy=S(t,"lookaheadStrategy")?t.lookaheadStrategy:new Zd({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(t){I(t,n=>{this.TRACE_INIT(`${n.name} Rule Lookahead`,()=>{const{alternation:r,repetition:i,option:s,repetitionMandatory:a,repetitionMandatoryWithSeparator:o,repetitionWithSeparator:c}=ep(n);I(r,u=>{const l=u.idx===0?"":u.idx;this.TRACE_INIT(`${Et(u)}${l}`,()=>{const h=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:u.idx,rule:n,maxLookahead:u.maxLookahead||this.maxLookahead,hasPredicates:u.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),f=Dn(this.fullRuleNameToShort[n.name],Js,u.idx);this.setLaFuncCache(f,h)})}),I(i,u=>{this.computeLookaheadFunc(n,u.idx,qn,"Repetition",u.maxLookahead,Et(u))}),I(s,u=>{this.computeLookaheadFunc(n,u.idx,ta,"Option",u.maxLookahead,Et(u))}),I(a,u=>{this.computeLookaheadFunc(n,u.idx,Qn,"RepetitionMandatory",u.maxLookahead,Et(u))}),I(o,u=>{this.computeLookaheadFunc(n,u.idx,Ye,"RepetitionMandatoryWithSeparator",u.maxLookahead,Et(u))}),I(c,u=>{this.computeLookaheadFunc(n,u.idx,Zn,"RepetitionWithSeparator",u.maxLookahead,Et(u))})})})}computeLookaheadFunc(t,n,r,i,s,a){this.TRACE_INIT(`${a}${n===0?"":n}`,()=>{const o=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:n,rule:t,maxLookahead:s||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:i}),c=Dn(this.fullRuleNameToShort[t.name],r,n);this.setLaFuncCache(c,o)})}getKeyForAutomaticLookahead(t,n){const r=this.getLastExplicitRuleShortName();return Dn(r,t,n)}getLaFuncFromCache(t){return this.lookAheadFuncsCache.get(t)}setLaFuncCache(t,n){this.lookAheadFuncsCache.set(t,n)}}class tp extends ae{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(t){this.dslMethods.option.push(t)}visitRepetitionWithSeparator(t){this.dslMethods.repetitionWithSeparator.push(t)}visitRepetitionMandatory(t){this.dslMethods.repetitionMandatory.push(t)}visitRepetitionMandatoryWithSeparator(t){this.dslMethods.repetitionMandatoryWithSeparator.push(t)}visitRepetition(t){this.dslMethods.repetition.push(t)}visitAlternation(t){this.dslMethods.alternation.push(t)}}const Ke=new tp;function ep(e){Ke.reset(),e.accept(Ke);const t=Ke.dslMethods;return Ke.reset(),t}function Wi(e,t){isNaN(e.startOffset)===!0?(e.startOffset=t.startOffset,e.endOffset=t.endOffset):e.endOffset<t.endOffset&&(e.endOffset=t.endOffset)}function ji(e,t){isNaN(e.startOffset)===!0?(e.startOffset=t.startOffset,e.startColumn=t.startColumn,e.startLine=t.startLine,e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine):e.endOffset<t.endOffset&&(e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine)}function np(e,t,n){e.children[n]===void 0?e.children[n]=[t]:e.children[n].push(t)}function rp(e,t,n){e.children[t]===void 0?e.children[t]=[n]:e.children[t].push(n)}const ip="name";function ea(e,t){Object.defineProperty(e,ip,{enumerable:!1,configurable:!0,writable:!1,value:t})}function sp(e,t){const n=rt(e),r=n.length;for(let i=0;i<r;i++){const s=n[i],a=e[s],o=a.length;for(let c=0;c<o;c++){const u=a[c];u.tokenTypeIdx===void 0&&this[u.name](u.children,t)}}}function ap(e,t){const n=function(){};ea(n,e+"BaseSemantics");const r={visit:function(i,s){if(_(i)&&(i=i[0]),!xt(i))return this[i.name](i.children,s)},validateVisitor:function(){const i=cp(this,t);if(!x(i)){const s=A(i,a=>a.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${s.join(`

`).replace(/\n/g,`
	`)}`)}}};return n.prototype=r,n.prototype.constructor=n,n._RULE_NAMES=t,n}function op(e,t,n){const r=function(){};ea(r,e+"BaseSemanticsWithDefaults");const i=Object.create(n.prototype);return I(t,s=>{i[s]=sp}),r.prototype=i,r.prototype.constructor=r,r}var Jn;(function(e){e[e.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",e[e.MISSING_METHOD=1]="MISSING_METHOD"})(Jn||(Jn={}));function cp(e,t){return up(e,t)}function up(e,t){const n=it(t,i=>kt(e[i])===!1),r=A(n,i=>({msg:`Missing visitor method: <${i}> on ${e.constructor.name} CST Visitor.`,type:Jn.MISSING_METHOD,methodName:i}));return Pe(r)}class lp{initTreeBuilder(t){if(this.CST_STACK=[],this.outputCst=t.outputCst,this.nodeLocationTracking=S(t,"nodeLocationTracking")?t.nodeLocationTracking:vt.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=b,this.cstFinallyStateUpdate=b,this.cstPostTerminal=b,this.cstPostNonTerminal=b,this.cstPostRule=b;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=ji,this.setNodeLocationFromNode=ji,this.cstPostRule=b,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=b,this.setNodeLocationFromNode=b,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Wi,this.setNodeLocationFromNode=Wi,this.cstPostRule=b,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=b,this.setNodeLocationFromNode=b,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=b,this.setNodeLocationFromNode=b,this.cstPostRule=b,this.setInitialNodeLocation=b;else throw Error(`Invalid <nodeLocationTracking> config option: "${t.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(t){t.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(t){t.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(t){t.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(t){const n=this.LA(1);t.location={startOffset:n.startOffset,startLine:n.startLine,startColumn:n.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(t){const n={name:t,children:Object.create(null)};this.setInitialNodeLocation(n),this.CST_STACK.push(n)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(t){const n=this.LA(0),r=t.location;r.startOffset<=n.startOffset?(r.endOffset=n.endOffset,r.endLine=n.endLine,r.endColumn=n.endColumn):(r.startOffset=NaN,r.startLine=NaN,r.startColumn=NaN)}cstPostRuleOnlyOffset(t){const n=this.LA(0),r=t.location;r.startOffset<=n.startOffset?r.endOffset=n.endOffset:r.startOffset=NaN}cstPostTerminal(t,n){const r=this.CST_STACK[this.CST_STACK.length-1];np(r,n,t),this.setNodeLocationFromToken(r.location,n)}cstPostNonTerminal(t,n){const r=this.CST_STACK[this.CST_STACK.length-1];rp(r,n,t),this.setNodeLocationFromNode(r.location,t.location)}getBaseCstVisitorConstructor(){if(xt(this.baseCstVisitorConstructor)){const t=ap(this.className,rt(this.gastProductionsCache));return this.baseCstVisitorConstructor=t,t}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(xt(this.baseCstVisitorWithDefaultsConstructor)){const t=op(this.className,rt(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=t,t}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){const t=this.RULE_STACK;return t[t.length-1]}getPreviousExplicitRuleShortName(){const t=this.RULE_STACK;return t[t.length-2]}getLastExplicitRuleOccurrenceIndex(){const t=this.RULE_OCCURRENCE_STACK;return t[t.length-1]}}class hp{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(t){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=t,this.tokVectorLength=t.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):sn}LA(t){const n=this.currIdx+t;return n<0||this.tokVectorLength<=n?sn:this.tokVector[n]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(t){this.currIdx=t}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}}class fp{ACTION(t){return t.call(this)}consume(t,n,r){return this.consumeInternal(n,t,r)}subrule(t,n,r){return this.subruleInternal(n,t,r)}option(t,n){return this.optionInternal(n,t)}or(t,n){return this.orInternal(n,t)}many(t,n){return this.manyInternal(t,n)}atLeastOne(t,n){return this.atLeastOneInternal(t,n)}CONSUME(t,n){return this.consumeInternal(t,0,n)}CONSUME1(t,n){return this.consumeInternal(t,1,n)}CONSUME2(t,n){return this.consumeInternal(t,2,n)}CONSUME3(t,n){return this.consumeInternal(t,3,n)}CONSUME4(t,n){return this.consumeInternal(t,4,n)}CONSUME5(t,n){return this.consumeInternal(t,5,n)}CONSUME6(t,n){return this.consumeInternal(t,6,n)}CONSUME7(t,n){return this.consumeInternal(t,7,n)}CONSUME8(t,n){return this.consumeInternal(t,8,n)}CONSUME9(t,n){return this.consumeInternal(t,9,n)}SUBRULE(t,n){return this.subruleInternal(t,0,n)}SUBRULE1(t,n){return this.subruleInternal(t,1,n)}SUBRULE2(t,n){return this.subruleInternal(t,2,n)}SUBRULE3(t,n){return this.subruleInternal(t,3,n)}SUBRULE4(t,n){return this.subruleInternal(t,4,n)}SUBRULE5(t,n){return this.subruleInternal(t,5,n)}SUBRULE6(t,n){return this.subruleInternal(t,6,n)}SUBRULE7(t,n){return this.subruleInternal(t,7,n)}SUBRULE8(t,n){return this.subruleInternal(t,8,n)}SUBRULE9(t,n){return this.subruleInternal(t,9,n)}OPTION(t){return this.optionInternal(t,0)}OPTION1(t){return this.optionInternal(t,1)}OPTION2(t){return this.optionInternal(t,2)}OPTION3(t){return this.optionInternal(t,3)}OPTION4(t){return this.optionInternal(t,4)}OPTION5(t){return this.optionInternal(t,5)}OPTION6(t){return this.optionInternal(t,6)}OPTION7(t){return this.optionInternal(t,7)}OPTION8(t){return this.optionInternal(t,8)}OPTION9(t){return this.optionInternal(t,9)}OR(t){return this.orInternal(t,0)}OR1(t){return this.orInternal(t,1)}OR2(t){return this.orInternal(t,2)}OR3(t){return this.orInternal(t,3)}OR4(t){return this.orInternal(t,4)}OR5(t){return this.orInternal(t,5)}OR6(t){return this.orInternal(t,6)}OR7(t){return this.orInternal(t,7)}OR8(t){return this.orInternal(t,8)}OR9(t){return this.orInternal(t,9)}MANY(t){this.manyInternal(0,t)}MANY1(t){this.manyInternal(1,t)}MANY2(t){this.manyInternal(2,t)}MANY3(t){this.manyInternal(3,t)}MANY4(t){this.manyInternal(4,t)}MANY5(t){this.manyInternal(5,t)}MANY6(t){this.manyInternal(6,t)}MANY7(t){this.manyInternal(7,t)}MANY8(t){this.manyInternal(8,t)}MANY9(t){this.manyInternal(9,t)}MANY_SEP(t){this.manySepFirstInternal(0,t)}MANY_SEP1(t){this.manySepFirstInternal(1,t)}MANY_SEP2(t){this.manySepFirstInternal(2,t)}MANY_SEP3(t){this.manySepFirstInternal(3,t)}MANY_SEP4(t){this.manySepFirstInternal(4,t)}MANY_SEP5(t){this.manySepFirstInternal(5,t)}MANY_SEP6(t){this.manySepFirstInternal(6,t)}MANY_SEP7(t){this.manySepFirstInternal(7,t)}MANY_SEP8(t){this.manySepFirstInternal(8,t)}MANY_SEP9(t){this.manySepFirstInternal(9,t)}AT_LEAST_ONE(t){this.atLeastOneInternal(0,t)}AT_LEAST_ONE1(t){return this.atLeastOneInternal(1,t)}AT_LEAST_ONE2(t){this.atLeastOneInternal(2,t)}AT_LEAST_ONE3(t){this.atLeastOneInternal(3,t)}AT_LEAST_ONE4(t){this.atLeastOneInternal(4,t)}AT_LEAST_ONE5(t){this.atLeastOneInternal(5,t)}AT_LEAST_ONE6(t){this.atLeastOneInternal(6,t)}AT_LEAST_ONE7(t){this.atLeastOneInternal(7,t)}AT_LEAST_ONE8(t){this.atLeastOneInternal(8,t)}AT_LEAST_ONE9(t){this.atLeastOneInternal(9,t)}AT_LEAST_ONE_SEP(t){this.atLeastOneSepFirstInternal(0,t)}AT_LEAST_ONE_SEP1(t){this.atLeastOneSepFirstInternal(1,t)}AT_LEAST_ONE_SEP2(t){this.atLeastOneSepFirstInternal(2,t)}AT_LEAST_ONE_SEP3(t){this.atLeastOneSepFirstInternal(3,t)}AT_LEAST_ONE_SEP4(t){this.atLeastOneSepFirstInternal(4,t)}AT_LEAST_ONE_SEP5(t){this.atLeastOneSepFirstInternal(5,t)}AT_LEAST_ONE_SEP6(t){this.atLeastOneSepFirstInternal(6,t)}AT_LEAST_ONE_SEP7(t){this.atLeastOneSepFirstInternal(7,t)}AT_LEAST_ONE_SEP8(t){this.atLeastOneSepFirstInternal(8,t)}AT_LEAST_ONE_SEP9(t){this.atLeastOneSepFirstInternal(9,t)}RULE(t,n,r=an){if(W(this.definedRulesNames,t)){const a={message:jt.buildDuplicateRuleNameError({topLevelRule:t,grammarName:this.className}),type:K.DUPLICATE_RULE_NAME,ruleName:t};this.definitionErrors.push(a)}this.definedRulesNames.push(t);const i=this.defineRule(t,n,r);return this[t]=i,i}OVERRIDE_RULE(t,n,r=an){const i=bd(t,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(i);const s=this.defineRule(t,n,r);return this[t]=s,s}BACKTRACK(t,n){return function(){this.isBackTrackingStack.push(1);const r=this.saveRecogState();try{return t.apply(this,n),!0}catch(i){if(nn(i))return!1;throw i}finally{this.reloadRecogState(r),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return df(U(this.gastProductionsCache))}}class dp{initRecognizerEngine(t,n){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=en,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},S(n,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(_(t)){if(x(t))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof t[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(_(t))this.tokensMap=q(t,(s,a)=>(s[a.name]=a,s),{});else if(S(t,"modes")&&lt(ut(U(t.modes)),cd)){const s=ut(U(t.modes)),a=Tr(s);this.tokensMap=q(a,(o,c)=>(o[c.name]=c,o),{})}else if(nt(t))this.tokensMap=$(t);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=G;const r=S(t,"modes")?ut(U(t.modes)):U(t),i=lt(r,s=>x(s.categoryMatches));this.tokenMatcher=i?en:be,Ue(U(this.tokensMap))}defineRule(t,n,r){if(this.selfAnalysisDone)throw Error(`Grammar rule <${t}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);const i=S(r,"resyncEnabled")?r.resyncEnabled:an.resyncEnabled,s=S(r,"recoveryValueFunc")?r.recoveryValueFunc:an.recoveryValueFunc,a=this.ruleShortNameIdx<<Qd+Gt;this.ruleShortNameIdx++,this.shortRuleNameToFull[a]=t,this.fullRuleNameToShort[t]=a;let o;return this.outputCst===!0?o=function(...l){try{this.ruleInvocationStateUpdate(a,t,this.subruleIdx),n.apply(this,l);const h=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(h),h}catch(h){return this.invokeRuleCatch(h,i,s)}finally{this.ruleFinallyStateUpdate()}}:o=function(...l){try{return this.ruleInvocationStateUpdate(a,t,this.subruleIdx),n.apply(this,l)}catch(h){return this.invokeRuleCatch(h,i,s)}finally{this.ruleFinallyStateUpdate()}},Object.assign(o,{ruleName:t,originalGrammarAction:n})}invokeRuleCatch(t,n,r){const i=this.RULE_STACK.length===1,s=n&&!this.isBackTracking()&&this.recoveryEnabled;if(nn(t)){const a=t;if(s){const o=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(o))if(a.resyncedTokens=this.reSyncTo(o),this.outputCst){const c=this.CST_STACK[this.CST_STACK.length-1];return c.recoveredNode=!0,c}else return r(t);else{if(this.outputCst){const c=this.CST_STACK[this.CST_STACK.length-1];c.recoveredNode=!0,a.partialCstResult=c}throw a}}else{if(i)return this.moveToTerminatedState(),r(t);throw a}}else throw t}optionInternal(t,n){const r=this.getKeyForAutomaticLookahead(ta,n);return this.optionInternalLogic(t,n,r)}optionInternalLogic(t,n,r){let i=this.getLaFuncFromCache(r),s;if(typeof t!="function"){s=t.DEF;const a=t.GATE;if(a!==void 0){const o=i;i=()=>a.call(this)&&o.call(this)}}else s=t;if(i.call(this)===!0)return s.call(this)}atLeastOneInternal(t,n){const r=this.getKeyForAutomaticLookahead(Qn,t);return this.atLeastOneInternalLogic(t,n,r)}atLeastOneInternalLogic(t,n,r){let i=this.getLaFuncFromCache(r),s;if(typeof n!="function"){s=n.DEF;const a=n.GATE;if(a!==void 0){const o=i;i=()=>a.call(this)&&o.call(this)}}else s=n;if(i.call(this)===!0){let a=this.doSingleRepetition(s);for(;i.call(this)===!0&&a===!0;)a=this.doSingleRepetition(s)}else throw this.raiseEarlyExitException(t,P.REPETITION_MANDATORY,n.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[t,n],i,Qn,t,Ad)}atLeastOneSepFirstInternal(t,n){const r=this.getKeyForAutomaticLookahead(Ye,t);this.atLeastOneSepFirstInternalLogic(t,n,r)}atLeastOneSepFirstInternalLogic(t,n,r){const i=n.DEF,s=n.SEP;if(this.getLaFuncFromCache(r).call(this)===!0){i.call(this);const o=()=>this.tokenMatcher(this.LA(1),s);for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,s,o,i,Gi],o,Ye,t,Gi)}else throw this.raiseEarlyExitException(t,P.REPETITION_MANDATORY_WITH_SEPARATOR,n.ERR_MSG)}manyInternal(t,n){const r=this.getKeyForAutomaticLookahead(qn,t);return this.manyInternalLogic(t,n,r)}manyInternalLogic(t,n,r){let i=this.getLaFuncFromCache(r),s;if(typeof n!="function"){s=n.DEF;const o=n.GATE;if(o!==void 0){const c=i;i=()=>o.call(this)&&c.call(this)}}else s=n;let a=!0;for(;i.call(this)===!0&&a===!0;)a=this.doSingleRepetition(s);this.attemptInRepetitionRecovery(this.manyInternal,[t,n],i,qn,t,Td,a)}manySepFirstInternal(t,n){const r=this.getKeyForAutomaticLookahead(Zn,t);this.manySepFirstInternalLogic(t,n,r)}manySepFirstInternalLogic(t,n,r){const i=n.DEF,s=n.SEP;if(this.getLaFuncFromCache(r).call(this)===!0){i.call(this);const o=()=>this.tokenMatcher(this.LA(1),s);for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,s,o,i,Bi],o,Zn,t,Bi)}}repetitionSepSecondInternal(t,n,r,i,s){for(;r();)this.CONSUME(n),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,n,r,i,s],r,Ye,t,s)}doSingleRepetition(t){const n=this.getLexerPosition();return t.call(this),this.getLexerPosition()>n}orInternal(t,n){const r=this.getKeyForAutomaticLookahead(Js,n),i=_(t)?t:t.DEF,a=this.getLaFuncFromCache(r).call(this,i);if(a!==void 0)return i[a].ALT.call(this);this.raiseNoAltException(n,t.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){const t=this.LA(1),n=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:t,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new zd(n,t))}}subruleInternal(t,n,r){let i;try{const s=r!==void 0?r.ARGS:void 0;return this.subruleIdx=n,i=t.apply(this,s),this.cstPostNonTerminal(i,r!==void 0&&r.LABEL!==void 0?r.LABEL:t.ruleName),i}catch(s){throw this.subruleInternalError(s,r,t.ruleName)}}subruleInternalError(t,n,r){throw nn(t)&&t.partialCstResult!==void 0&&(this.cstPostNonTerminal(t.partialCstResult,n!==void 0&&n.LABEL!==void 0?n.LABEL:r),delete t.partialCstResult),t}consumeInternal(t,n,r){let i;try{const s=this.LA(1);this.tokenMatcher(s,t)===!0?(this.consumeToken(),i=s):this.consumeInternalError(t,s,r)}catch(s){i=this.consumeInternalRecovery(t,n,s)}return this.cstPostTerminal(r!==void 0&&r.LABEL!==void 0?r.LABEL:t.name,i),i}consumeInternalError(t,n,r){let i;const s=this.LA(0);throw r!==void 0&&r.ERR_MSG?i=r.ERR_MSG:i=this.errorMessageProvider.buildMismatchTokenMessage({expected:t,actual:n,previous:s,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new ot(i,n,s))}consumeInternalRecovery(t,n,r){if(this.recoveryEnabled&&r.name==="MismatchedTokenException"&&!this.isBackTracking()){const i=this.getFollowsForInRuleRecovery(t,n);try{return this.tryInRuleRecovery(t,i)}catch(s){throw s.name===Zs?r:s}}else throw r}saveRecogState(){const t=this.errors,n=$(this.RULE_STACK);return{errors:t,lexerState:this.exportLexerState(),RULE_STACK:n,CST_STACK:this.CST_STACK}}reloadRecogState(t){this.errors=t.errors,this.importLexerState(t.lexerState),this.RULE_STACK=t.RULE_STACK}ruleInvocationStateUpdate(t,n,r){this.RULE_OCCURRENCE_STACK.push(r),this.RULE_STACK.push(t),this.cstInvocationStateUpdate(n)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){const t=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[t]}shortRuleNameToFullName(t){return this.shortRuleNameToFull[t]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),G)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}}class pp{initErrorHandler(t){this._errors=[],this.errorMessageProvider=S(t,"errorMessageProvider")?t.errorMessageProvider:vt.errorMessageProvider}SAVE_ERROR(t){if(nn(t))return t.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:$(this.RULE_OCCURRENCE_STACK)},this._errors.push(t),t;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return $(this._errors)}set errors(t){this._errors=t}raiseEarlyExitException(t,n,r){const i=this.getCurrRuleFullName(),s=this.getGAstProductions()[i],o=Or(t,s,n,this.maxLookahead)[0],c=[];for(let l=1;l<=this.maxLookahead;l++)c.push(this.LA(l));const u=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:o,actual:c,previous:this.LA(0),customUserDescription:r,ruleName:i});throw this.SAVE_ERROR(new Vd(u,this.LA(1),this.LA(0)))}raiseNoAltException(t,n){const r=this.getCurrRuleFullName(),i=this.getGAstProductions()[r],s=Sr(t,i,this.maxLookahead),a=[];for(let u=1;u<=this.maxLookahead;u++)a.push(this.LA(u));const o=this.LA(0),c=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:s,actual:a,previous:o,customUserDescription:n,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new Hd(c,this.LA(1),o))}}class mp{initContentAssist(){}computeContentAssist(t,n){const r=this.gastProductionsCache[t];if(xt(r))throw Error(`Rule ->${t}<- does not exist in this grammar.`);return Bs([r],n,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(t){const n=ft(t.ruleStack),i=this.getGAstProductions()[n];return new gd(i,t).startWalking()}}const _n={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(_n);const Hi=!0,zi=Math.pow(2,Gt)-1,na=R({name:"RECORDING_PHASE_TOKEN",pattern:H.NA});Ue([na]);const ra=Ht(na,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(ra);const Ep={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}};class gp{initGastRecorder(t){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let t=0;t<10;t++){const n=t>0?t:"";this[`CONSUME${n}`]=function(r,i){return this.consumeInternalRecord(r,t,i)},this[`SUBRULE${n}`]=function(r,i){return this.subruleInternalRecord(r,t,i)},this[`OPTION${n}`]=function(r){return this.optionInternalRecord(r,t)},this[`OR${n}`]=function(r){return this.orInternalRecord(r,t)},this[`MANY${n}`]=function(r){this.manyInternalRecord(t,r)},this[`MANY_SEP${n}`]=function(r){this.manySepFirstInternalRecord(t,r)},this[`AT_LEAST_ONE${n}`]=function(r){this.atLeastOneInternalRecord(t,r)},this[`AT_LEAST_ONE_SEP${n}`]=function(r){this.atLeastOneSepFirstInternalRecord(t,r)}}this.consume=function(t,n,r){return this.consumeInternalRecord(n,t,r)},this.subrule=function(t,n,r){return this.subruleInternalRecord(n,t,r)},this.option=function(t,n){return this.optionInternalRecord(n,t)},this.or=function(t,n){return this.orInternalRecord(n,t)},this.many=function(t,n){this.manyInternalRecord(t,n)},this.atLeastOne=function(t,n){this.atLeastOneInternalRecord(t,n)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{const t=this;for(let n=0;n<10;n++){const r=n>0?n:"";delete t[`CONSUME${r}`],delete t[`SUBRULE${r}`],delete t[`OPTION${r}`],delete t[`OR${r}`],delete t[`MANY${r}`],delete t[`MANY_SEP${r}`],delete t[`AT_LEAST_ONE${r}`],delete t[`AT_LEAST_ONE_SEP${r}`]}delete t.consume,delete t.subrule,delete t.option,delete t.or,delete t.many,delete t.atLeastOne,delete t.ACTION,delete t.BACKTRACK,delete t.LA})}ACTION_RECORD(t){}BACKTRACK_RECORD(t,n){return()=>!0}LA_RECORD(t){return sn}topLevelRuleRecord(t,n){try{const r=new se({definition:[],name:t});return r.name=t,this.recordingProdStack.push(r),n.call(this),this.recordingProdStack.pop(),r}catch(r){if(r.KNOWN_RECORDER_ERROR!==!0)try{r.message=r.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw r}throw r}}optionInternalRecord(t,n){return pe.call(this,j,t,n)}atLeastOneInternalRecord(t,n){pe.call(this,Ot,n,t)}atLeastOneSepFirstInternalRecord(t,n){pe.call(this,It,n,t,Hi)}manyInternalRecord(t,n){pe.call(this,w,n,t)}manySepFirstInternalRecord(t,n){pe.call(this,pt,n,t,Hi)}orInternalRecord(t,n){return Tp.call(this,t,n)}subruleInternalRecord(t,n,r){if(rn(n),!t||S(t,"ruleName")===!1){const o=new Error(`<SUBRULE${Vi(n)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(t)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw o.KNOWN_RECORDER_ERROR=!0,o}const i=Vt(this.recordingProdStack),s=t.ruleName,a=new Q({idx:n,nonTerminalName:s,label:r?.LABEL,referencedRule:void 0});return i.definition.push(a),this.outputCst?Ep:_n}consumeInternalRecord(t,n,r){if(rn(n),!Fs(t)){const a=new Error(`<CONSUME${Vi(n)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(t)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw a.KNOWN_RECORDER_ERROR=!0,a}const i=Vt(this.recordingProdStack),s=new k({idx:n,terminalType:t,label:r?.LABEL});return i.definition.push(s),ra}}function pe(e,t,n,r=!1){rn(n);const i=Vt(this.recordingProdStack),s=kt(t)?t:t.DEF,a=new e({definition:[],idx:n});return r&&(a.separator=t.SEP),S(t,"MAX_LOOKAHEAD")&&(a.maxLookahead=t.MAX_LOOKAHEAD),this.recordingProdStack.push(a),s.call(this),i.definition.push(a),this.recordingProdStack.pop(),_n}function Tp(e,t){rn(t);const n=Vt(this.recordingProdStack),r=_(e)===!1,i=r===!1?e:e.DEF,s=new mt({definition:[],idx:t,ignoreAmbiguities:r&&e.IGNORE_AMBIGUITIES===!0});S(e,"MAX_LOOKAHEAD")&&(s.maxLookahead=e.MAX_LOOKAHEAD);const a=Ls(i,o=>kt(o.GATE));return s.hasPredicates=a,n.definition.push(s),I(i,o=>{const c=new V({definition:[]});s.definition.push(c),S(o,"IGNORE_AMBIGUITIES")?c.ignoreAmbiguities=o.IGNORE_AMBIGUITIES:S(o,"GATE")&&(c.ignoreAmbiguities=!0),this.recordingProdStack.push(c),o.ALT.call(this),this.recordingProdStack.pop()}),_n}function Vi(e){return e===0?"":`${e}`}function rn(e){if(e<0||e>zi){const t=new Error(`Invalid DSL Method idx value: <${e}>
	Idx value must be a none negative value smaller than ${zi+1}`);throw t.KNOWN_RECORDER_ERROR=!0,t}}class Ap{initPerformanceTracer(t){if(S(t,"traceInitPerf")){const n=t.traceInitPerf,r=typeof n=="number";this.traceInitMaxIdent=r?n:1/0,this.traceInitPerf=r?n>0:n}else this.traceInitMaxIdent=0,this.traceInitPerf=vt.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(t,n){if(this.traceInitPerf===!0){this.traceInitIndent++;const r=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${r}--> <${t}>`);const{time:i,value:s}=Cs(n),a=i>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(`${r}<-- <${t}> time: ${i}ms`),this.traceInitIndent--,s}else return n()}}function Rp(e,t){t.forEach(n=>{const r=n.prototype;Object.getOwnPropertyNames(r).forEach(i=>{if(i==="constructor")return;const s=Object.getOwnPropertyDescriptor(r,i);s&&(s.get||s.set)?Object.defineProperty(e.prototype,i,s):e.prototype[i]=n.prototype[i]})})}const sn=Ht(G,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(sn);const vt=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:Ds,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),an=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0});var K;(function(e){e[e.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",e[e.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",e[e.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",e[e.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",e[e.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",e[e.LEFT_RECURSION=5]="LEFT_RECURSION",e[e.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",e[e.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",e[e.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",e[e.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",e[e.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",e[e.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",e[e.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",e[e.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(K||(K={}));class we{static performSelfAnalysis(t){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let t;this.selfAnalysisDone=!0;const n=this.className;this.TRACE_INIT("toFastProps",()=>{ys(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),I(this.definedRulesNames,i=>{const a=this[i].originalGrammarAction;let o;this.TRACE_INIT(`${i} Rule`,()=>{o=this.topLevelRuleRecord(i,a)}),this.gastProductionsCache[i]=o})}finally{this.disableRecording()}});let r=[];if(this.TRACE_INIT("Grammar Resolving",()=>{r=Wd({rules:U(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(r)}),this.TRACE_INIT("Grammar Validations",()=>{if(x(r)&&this.skipValidations===!1){const i=jd({rules:U(this.gastProductionsCache),tokenTypes:U(this.tokensMap),errMsgProvider:jt,grammarName:n}),s=yd({lookaheadStrategy:this.lookaheadStrategy,rules:U(this.gastProductionsCache),tokenTypes:U(this.tokensMap),grammarName:n});this.definitionErrors=this.definitionErrors.concat(i,s)}}),x(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{const i=Rf(U(this.gastProductionsCache));this.resyncFollows=i}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var i,s;(s=(i=this.lookaheadStrategy).initialize)===null||s===void 0||s.call(i,{rules:U(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(U(this.gastProductionsCache))})),!we.DEFER_DEFINITION_ERRORS_HANDLING&&!x(this.definitionErrors))throw t=A(this.definitionErrors,i=>i.message),new Error(`Parser Definition Errors detected:
 ${t.join(`
-------------------------------
`)}`)})}constructor(t,n){this.definitionErrors=[],this.selfAnalysisDone=!1;const r=this;if(r.initErrorHandler(n),r.initLexerAdapter(),r.initLooksAhead(n),r.initRecognizerEngine(t,n),r.initRecoverable(n),r.initTreeBuilder(n),r.initContentAssist(),r.initGastRecorder(n),r.initPerformanceTracer(n),S(n,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=S(n,"skipValidations")?n.skipValidations:vt.skipValidations}}we.DEFER_DEFINITION_ERRORS_HANDLING=!1;Rp(we,[Xd,Jd,lp,hp,dp,fp,pp,mp,gp,Ap]);class Sp extends we{constructor(t,n=vt){const r=$(n);r.outputCst=!1,super(t,r)}}const B=R({name:"WhiteSpace",pattern:/[\x09\x20\xA0\u1680\u2000-\u200A\u202F\u205F\u3000]+/}),ia=R({name:"BOM",pattern:/\uFEFF/}),ct=R({name:"NewLine",pattern:/\x0D\x0A|[\x0A-\x0D\x85\u2028\u2029]/}),on=R({name:"BlockComment",pattern:/\/-/}),Cn=R({name:"LineComment",pattern:/\/\/([^\x00-\x08\x0A-\x1F\x7F\x85\u200E\u200F\u2028-\u202E\u2066-\u2069\uD800-\uDFFF\uFEFF]|[\uD800-\uDBFF][\uDC00-\uDFFF])*/,line_breaks:!0}),Le=R({name:"OpenMultiLineComment",pattern:/\/\*/,push_mode:"multilineComment"}),Nr=R({name:"MultiLineCommentContent",pattern:/([^/*]+|\*|\/)/,line_breaks:!0}),Lr=R({name:"CloseMultiLineComment",pattern:/\*\//,pop_mode:"multilineComment"}),yn=R({name:"Identifier",pattern:/(?![+-]?\.?\d)([^\x00-\x20\x22-\x23\x28-\x29\x2F\x3B\x3D\x5B-\x5D\x7B\x7D\x7F\x85\xA0\u1680\u2000-\u200A\u200E\u200F\u2028-\u202F\u205F\u2066-\u2069\u3000\uD800-\uDFFF\uFEFF]|[\uD800-\uDBFF][\uDC00-\uDFFF])+/}),_r=R({name:"Boolean",pattern:/#true|#false/}),Cr=R({name:"Null",pattern:/#null/}),yr=R({name:"FloatKeyword",pattern:/#inf|#-inf|#nan/}),xr=R({name:"RawString",pattern:/(#+)"([^\x00-\x08\x0A-\x1F\x7F\x85\u200E\u200F\u2028-\u202E\u2066-\u2069\uD800-\uDFFF\uFEFF]|[\uD800-\uDBFF][\uDC00-\uDFFF])*?"\1/}),vr=R({name:"MultiLineRawString",pattern:/(#+)"""([^\x00-\x08\x0E-\x1F\x7F\u200E\u200F\u202A-\u202E\u2066-\u2069\uD800-\uDFFF\uFEFF]|[\uD800-\uDBFF][\uDC00-\uDFFF])*?"""\1/,line_breaks:!0}),kr=R({name:"Float",pattern:/[+-]?[0-9][0-9_]*(\.[0-9][0-9_]*)?([eE][+-]?[0-9][0-9_]*)?/}),Pr=R({name:"Integer",pattern:/[+-]?(0x[0-9a-fA-F][0-9a-fA-F_]*|0o[0-7][0-7_]*|0b[01][01_]*)/}),Mr=R({name:"SemiColon",pattern:/;/}),xn=R({name:"Equals",pattern:/=/}),sa=R({name:"LeftBrace",pattern:/\{/}),cn=R({name:"RightBrace",pattern:/\}/}),_e=R({name:"LeftParenthesis",pattern:/\(/}),_t=R({name:"RightParenthesis",pattern:/\)/}),br=R({name:"EscLine",pattern:/\\/}),Op=R({name:"Unknown",pattern:/[^]/}),Ur=R({name:"OpenQuote",pattern:/"/,push_mode:"string"}),Ct=R({name:"Unicode",pattern:/([^\\"\x00-\x08\x0A-\x1F\x7F\x85\u200E\u200F\u2028-\u202E\u2066-\u2069\uD800-\uDFFF\uFEFF]|[\uD800-\uDBFF][\uDC00-\uDFFF])+/}),ie=R({name:"Escape",pattern:/\\[nrt\\"bfs]/}),Ce=R({name:"UnicodeEscape",pattern:/\\u\{([0-9a-fA-F]{1,5}|10[0-9a-fA-F]{4})\}/}),ye=R({name:"WhiteSpaceEscape",pattern:/\\[\x09\x0A-\x0D\x20\x85\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]+/,line_breaks:!0}),wr=R({name:"CloseQuote",pattern:/"/,pop_mode:!0}),Fr=R({name:"MultiLineOpenQuote",pattern:/"""/,push_mode:"multilineString"}),un=R({name:"MultiLineCloseQuote",pattern:/"""/,pop_mode:!0}),$r=R({name:"MultiLineSingleQuote",pattern:/"/}),aa=R({name:"LeftBracket",pattern:/\[/}),oa=R({name:"RightBracket",pattern:/\]/}),tr=R({name:"GreaterThan",pattern:/>/}),ca=R({name:"LessThan",pattern:/</}),ua=R({name:"GreaterOrEqualThan",pattern:/>=/}),la=R({name:"LessOrEqualThan",pattern:/<=/}),ha=R({name:"Or",pattern:/\|\|/}),fa=R({name:"Descendant",pattern:/>>/}),da=R({name:"AdjacentSibling",pattern:/\+/}),pa=R({name:"Sibling",pattern:/\+\+/}),ma=R({name:"NotEquals",pattern:/!=/}),Ea=R({name:"StartsWith",pattern:/\^=/}),ga=R({name:"EndsWith",pattern:/\$=/}),Ta=R({name:"Contains",pattern:/\*=/}),Aa=R({name:"Map",pattern:/=>/}),Ra=R({name:"TopAccessor",pattern:/top\(/}),Sa=R({name:"ValAccessor",pattern:/val\(/}),Oa=R({name:"PropAccessor",pattern:/prop\(/}),Ia=R({name:"Accessor",pattern:/(name|tag|values|props)\(/}),Na=R({name:"Comma",pattern:/,/}),Yi={"\\n":`
`,"\\r":"\r","\\t":"	","\\\\":"\\","\\/":"/",'\\"':'"',"\\b":"\b","\\f":"\f","\\s":" "},Ip={b:2,o:8,x:16},Np={"#inf":1/0,"#-inf":-1/0,"#nan":NaN},Lp=new Set(["true","false","null","inf","-inf","nan"]);class La extends Sp{constructor(t){super(t),this.RULE("tag",()=>{this.CONSUME(_e),this.OPTION(()=>this.SUBRULE(this.nodeSpace));const n=this.SUBRULE(this.string);return this.OPTION1(()=>this.SUBRULE1(this.nodeSpace)),this.CONSUME(_t),n}),this.RULE("value",()=>this.OR([{ALT:()=>this.SUBRULE(this.string)},{ALT:()=>this.CONSUME(_r).image==="#true"},{ALT:()=>(this.CONSUME(Cr),null)},{ALT:()=>{const n=this.CONSUME(yr).image;return Np[n]}},{ALT:()=>{const n=this.CONSUME(kr).image.replace(/_/g,"");return parseFloat(n,10)}},{ALT:()=>{const n=this.CONSUME(Pr).image,r=n.startsWith("-")?-1:1,i=n.replace(/^[+-]?0|_/g,"");return r*parseInt(i.slice(1),Ip[i[0]])}}])),this.RULE("string",()=>this.OR([{ALT:()=>this.SUBRULE(this.identifierString)},{ALT:()=>this.SUBRULE(this.quotedString)},{ALT:()=>this.SUBRULE(this.multilineString)},{ALT:()=>this.SUBRULE(this.rawString)},{ALT:()=>this.SUBRULE(this.multilineRawString)}])),this.RULE("identifierString",()=>{const n=this.LA(0),r=this.CONSUME(yn);if(Lp.has(r.image)){const i=new ot("Bare identifier string must not be a keyword",r,n);throw this.SAVE_ERROR(i)}return r.image}),this.RULE("quotedString",()=>{let n="";return this.CONSUME(Ur),this.MANY(()=>{n+=this.OR([{ALT:()=>this.CONSUME(Ct).image},{ALT:()=>Yi[this.CONSUME(ie).image]},{ALT:()=>this.SUBRULE(this.unicodeEscape)},{ALT:()=>(this.CONSUME(ye),"")}])}),this.CONSUME(wr),n}),this.RULE("multilineString",()=>{this.CONSUME(Fr);const n=[];return this.AT_LEAST_ONE(()=>{const r=this.CONSUME(ct),i=this.OPTION(()=>this.CONSUME(B));let s="";this.MANY1(()=>{this.OR([{ALT:()=>{s+=this.CONSUME($r).image}},{ALT:()=>{s+=this.CONSUME(Ct).image}},{ALT:()=>{s+=Yi[this.CONSUME(ie).image]}},{ALT:()=>{s+=this.SUBRULE(this.unicodeEscape)}},{ALT:()=>{this.CONSUME(ye)}},{ALT:()=>{s+=this.CONSUME1(B).image}},{GATE:()=>this.LA(1).tokenType===un,ALT:()=>{}}])}),n.push({line:s,prefix:i,newline:r})}),this.CONSUME(un),this.ACTION(()=>{const r=n.pop();if(r.line!==""){const s=new ot("Multiline string cannot be dedented",r.prefix,r.newline);this.SAVE_ERROR(s)}const i=r.prefix?r.prefix.image:"";for(let s=0;s<n.length;s++){if(n[s].line.length===0){n[s]="";continue}if(i)if(n[s].prefix&&n[s].prefix.image.startsWith(i)){n[s]=n[s].prefix.image.slice(i.length)+n[s].line;continue}else{const a=new ot("Multiline string cannot be dedented",n[s].prefix,n[s].newline);this.SAVE_ERROR(a)}n[s]=n[s].prefix?n[s].prefix.image+n[s].line:n[s].line}return n.join(`
`)})}),this.RULE("rawString",()=>{const n=this.LA(0),r=this.CONSUME(xr),i=r.image;if(i==='#"""#'){const a=new ot("Multiline string cannot be dedented",r,n);throw this.SAVE_ERROR(a)}const s=i.indexOf('"')+1;return i.slice(s,-s)}),this.RULE("multilineRawString",()=>{const n=this.CONSUME(vr),r=n.image,i=r.indexOf('"""')+3,s=r.slice(i,-i);if(this.RECORDING_PHASE)return s;const a=new RegExp(ct.PATTERN.source,"g"),o=s.split(a);if(o[0]!==""){const l=Ht(Ct,o[0],n.startOffset+i,n.startOffset+i+o[0].length,n.startLine,n.startLine,n.startColumn+i,n.startColumn+i+o[0].length),h=new ot("Multiline string cannot be dedented",l);this.SAVE_ERROR(h)}const c=o[o.length-1],u=new RegExp("^("+B.PATTERN.source+")$");if(c.length>0&&!c.match(u)){const l=Ht(Ct,c,n.endOffset-i-c.length,n.endOffset-i,n.endLine,n.endLine,0,c.length),h=new ot("Multiline string cannot be dedented",l);this.SAVE_ERROR(h)}for(let l=1;l<o.length-1;l++){if(o[l].match(u)||o[l].length===0){o[l]="";continue}if(c)if(o[l].startsWith(c))o[l]=o[l].slice(c.length);else{const h=n.startOffset+i+o.slice(0,l).join().length+l,f=Ht(Ct,o[l],h,h+o[l].length,n.startLine+l,n.startLine+l,0,o[l].length),p=new ot("Multiline string cannot be dedented",f);this.SAVE_ERROR(p)}}return o.slice(1,-1).join(`
`)}),this.RULE("unicodeEscape",()=>{const n=this.LA(0),r=this.CONSUME(Ce),i=parseInt(r.image.slice(3,-1),16);if(i>=55296&&i<=57343){const s="Strings may not contain escaped Unicode Scalar Values (U+D800 to U+DFFF)",a=new ot(s,r,n);throw this.SAVE_ERROR(a)}return String.fromCharCode(i)}),this.RULE("nodeSpace",()=>{this.AT_LEAST_ONE(()=>this.OR([{ALT:()=>this.SUBRULE(this.whiteSpace)},{ALT:()=>this.SUBRULE(this.lineContinuation)}]))}),this.RULE("lineContinuation",()=>{this.CONSUME(br),this.OPTION(()=>this.SUBRULE(this.whiteSpace)),this.OR([{ALT:()=>this.SUBRULE(this.lineComment)},{ALT:()=>this.CONSUME(ct)},{ALT:()=>this.CONSUME(G)}])}),this.RULE("lineComment",()=>{this.CONSUME(Cn),this.OR([{ALT:()=>this.CONSUME(ct)},{ALT:()=>this.CONSUME(G)}])}),this.RULE("multilineComment",()=>{this.CONSUME(Le),this.MANY(()=>{this.OR([{ALT:()=>this.CONSUME(Nr)},{ALT:()=>this.SUBRULE(this.multilineComment)}])}),this.CONSUME(Lr)}),this.RULE("whiteSpace",()=>{this.AT_LEAST_ONE(()=>{this.OR([{ALT:()=>this.CONSUME(B)},{ALT:()=>this.SUBRULE(this.multilineComment)}])})})}formatError(t,n,r=n.message,{context:i=3}={}){let s=r+`
`;const{startLine:a,endLine:o,startColumn:c,endColumn:u}=n.token,l=t.split(`
`);return s+=l.slice(a-Math.min(a,i),o).join(`
`),s+=`
`,s+=" ".repeat(c-1)+"^".repeat(u-c+1),s+=` at ${a}:${c}
`,s+=n.context.ruleStack.map(h=>"  "+h).join(`
`),s}}const _a={defaultMode:"main",modes:{main:[B,ia,ct,on,Cn,Le,_r,Cr,yr,vr,xr,Pr,kr,Mr,xn,sa,cn,_e,_t,br,Fr,Ur,yn],multilineComment:[Le,Lr,Nr],string:[Ct,ie,Ce,ye,wr],multilineString:[un,$r,ct,B,Ct,ie,Ce,ye]}},Xi=new Set([cn,Cn,ct,Mr,G]);class _p extends La{constructor(){super(_a),this.RULE("document",()=>{this.OPTION(()=>this.CONSUME(ia));const t=this.SUBRULE(this.nodes);return this.CONSUME(G),t}),this.RULE("nodes",()=>{const t=[];return this.MANY(()=>this.OR([{ALT:()=>{this.CONSUME(on),this.OPTION1(()=>this.SUBRULE(this.lineSpace)),this.SUBRULE(this.node)}},{ALT:()=>this.SUBRULE1(this.lineSpace)},{ALT:()=>t.push(this.SUBRULE1(this.node))}])),t}),this.RULE("node",()=>{const t={name:void 0,properties:{},values:[],children:[],tags:{name:void 0,properties:{},values:[]}};this.OPTION(()=>{t.tags.name=this.SUBRULE(this.tag),this.OPTION1(()=>this.SUBRULE(this.nodeSpace))}),t.name=this.SUBRULE(this.string);let n=!1,r=!1;return this.MANY({GATE:()=>!Xi.has(this.LA(1).tokenType),DEF:()=>{this.SUBRULE1(this.nodeSpace),this.OR([{GATE:()=>!n&&this.BACKTRACK(this.property).call(this),ALT:()=>{const i=this.SUBRULE(this.property);t.properties[i[0]]=i[1],t.tags.properties[i[0]]=i[2]}},{GATE:()=>!n&&this.BACKTRACK(this.argument).call(this),ALT:()=>{const i=this.SUBRULE(this.argument);t.values.push(i[0]),t.tags.values.push(i[1])}},{GATE:()=>!r,ALT:()=>{t.children=this.SUBRULE(this.nodeChildren),n=!0,r=!0}},{ALT:()=>{this.CONSUME(on),this.OPTION2(()=>this.SUBRULE(this.lineSpace)),this.OR1([{GATE:()=>!n&&this.BACKTRACK(this.property).call(this),ALT:()=>this.SUBRULE1(this.property)},{GATE:()=>!n&&this.BACKTRACK(this.argument).call(this),ALT:()=>this.SUBRULE1(this.argument)},{ALT:()=>{this.SUBRULE1(this.nodeChildren),n=!0}}])}},{GATE:()=>Xi.has(this.LA(1).tokenType),ALT:()=>{}}])}}),this.LA(1).tokenType!==cn&&this.SUBRULE(this.nodeTerminator),t}),this.RULE("property",()=>{const t=this.SUBRULE(this.string);this.OPTION(()=>this.SUBRULE(this.nodeSpace)),this.CONSUME(xn),this.OPTION1(()=>this.SUBRULE1(this.nodeSpace));const n=this.SUBRULE(this.argument);return[t,n[0],n[1]]}),this.RULE("argument",()=>{const t=this.OPTION(()=>{const r=this.SUBRULE(this.tag);return this.OPTION1(()=>this.SUBRULE(this.nodeSpace)),r});return[this.SUBRULE(this.value),t]}),this.RULE("nodeChildren",()=>{this.CONSUME(sa);const t=this.SUBRULE(this.nodes);return this.CONSUME(cn),t}),this.RULE("lineSpace",()=>{this.AT_LEAST_ONE(()=>this.OR([{ALT:()=>this.SUBRULE(this.nodeSpace)},{ALT:()=>this.CONSUME(ct)},{ALT:()=>this.SUBRULE(this.lineComment)}]))}),this.RULE("nodeTerminator",()=>{this.OR([{ALT:()=>this.SUBRULE(this.lineComment)},{ALT:()=>this.CONSUME(ct)},{ALT:()=>this.CONSUME(Mr)},{ALT:()=>this.CONSUME(G)}])}),this.performSelfAnalysis()}}function Cp(e,t,n){const r=e.offset+e.length,i=n.slice(e.offset,r),s=i.split(/\r?\n/g),a=t.find(o=>o.endOffset+1===e.offset);return new ot(e.message,Ht(Op,i,e.offset,r,e.line,e.line+s.length-1,e.column,e.column+s[s.length-1].length),a)}const yp=new H(_a),Bn=new _p;function xp(e){const{tokens:t,errors:n}=yp.tokenize(e);return n.length?{output:void 0,errors:n.map(i=>Cp(i,t,e))}:(Bn.input=t,{output:Bn.document(),errors:Bn.errors})}const vp=xp;new RegExp("^("+yn.PATTERN.source+")$");const Ca={defaultMode:"main",modes:{main:[aa,oa,fa,ua,la,tr,ca,ha,pa,da,ma,Ea,ga,Ta,Aa,Ra,Sa,Oa,Ia,Na,B,ct,on,Cn,Le,_r,Cr,yr,vr,xr,Pr,kr,xn,_e,_t,br,Fr,Ur,yn],multilineComment:[Le,Lr,Nr],string:[Ct,ie,Ce,wr],multilineString:[un,$r,ct,B,Ct,ie,Ce,ye]}};class kp extends La{constructor(){super(Ca),this.RULE("query",()=>{const t=[this.SUBRULE(this.selector)];this.MANY(()=>{this.CONSUME(ha),this.CONSUME1(B);const r=this.SUBRULE1(this.selector);t.push(r)});const n=this.OPTION(()=>(this.CONSUME(Aa),this.CONSUME2(B),this.SUBRULE(this.mapTuple)));return this.CONSUME(G),{alternatives:t,mapping:n}}),this.RULE("selector",()=>{const t=[this.SUBRULE(this.nodeFilter)];return this.OR([{ALT:()=>this.CONSUME(B)},{ALT:()=>this.CONSUME(G)}]),this.MANY(()=>{const n=this.SUBRULE(this.selectionOperator);this.CONSUME1(B);const r=this.SUBRULE1(this.nodeFilter);t.push({...r,operator:n}),this.OR1([{ALT:()=>this.CONSUME2(B)},{ALT:()=>this.CONSUME1(G)}])}),t}),this.RULE("nodeFilter",()=>{const t=[];return this.AT_LEAST_ONE(()=>{t.push(this.SUBRULE(this.matcher))}),{matchers:t}}),this.RULE("matcher",()=>this.OR([{ALT:()=>({accessor:{type:"name"},operator:"=",value:this.SUBRULE(this.string)})},{ALT:()=>(this.CONSUME(Ra),this.CONSUME(_t),{accessor:{type:"top"}})},{ALT:()=>(this.CONSUME1(_e),this.CONSUME1(_t),{accessor:{type:"tag"}})},{ALT:()=>({accessor:{type:"name"},operator:"=",tag:this.SUBRULE(this.tag)})},{ALT:()=>this.SUBRULE(this.accessorMatcher)}])),this.RULE("accessorMatcher",()=>{this.CONSUME(aa);const t=this.OPTION(()=>{const n=this.SUBRULE(this.accessor);return this.OPTION1(()=>{this.CONSUME(B);const i=this.SUBRULE(this.matcherOperator);this.CONSUME1(B);const s={accessor:n,operator:i};return this.OR([{ALT:()=>{s.value=this.SUBRULE(this.value)}},{ALT:()=>{s.tag=this.SUBRULE(this.tag)}}]),s})||{accessor:n}});return this.CONSUME(oa),t||{}}),this.RULE("accessor",()=>this.OR([{ALT:()=>{this.CONSUME(Sa);const t=this.OPTION(()=>this.SUBRULE(this.value));return this.CONSUME(_t),{type:"val",parameter:t}}},{ALT:()=>{this.CONSUME(Oa);const t=this.SUBRULE(this.string);return this.CONSUME1(_t),{type:"prop",parameter:t}}},{ALT:()=>{const t=this.CONSUME(Ia).image.slice(0,-1);return this.CONSUME2(_t),{type:t}}},{ALT:()=>({type:"prop",parameter:this.SUBRULE1(this.string)})}])),this.RULE("selectionOperator",()=>this.OR([{ALT:()=>this.CONSUME(fa)},{ALT:()=>this.CONSUME(tr)},{ALT:()=>this.CONSUME(da)},{ALT:()=>this.CONSUME(pa)}]).image),this.RULE("matcherOperator",()=>this.OR([{ALT:()=>this.CONSUME(tr)},{ALT:()=>this.CONSUME(ca)},{ALT:()=>this.CONSUME(ua)},{ALT:()=>this.CONSUME(la)},{ALT:()=>this.CONSUME(xn)},{ALT:()=>this.CONSUME(ma)},{ALT:()=>this.CONSUME(Ea)},{ALT:()=>this.CONSUME(ga)},{ALT:()=>this.CONSUME(Ta)}]).image),this.RULE("mapTuple",()=>this.OR([{ALT:()=>this.SUBRULE(this.accessor)},{ALT:()=>{this.CONSUME(_e);const t=[this.SUBRULE1(this.accessor)];return this.MANY(()=>{this.CONSUME(Na),this.CONSUME(B),t.push(this.SUBRULE2(this.accessor))}),this.CONSUME(_t),t}}])),this.performSelfAnalysis()}}new H(Ca);new kp;async function ya(e,t){const{controller:n,...r}=t||{},i=`${Re.BASE_URL}${e}`;try{const s=await fetch(i,{...r,signal:n?.signal});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(s){throw console.error("API request failed:",i,s),s}}async function bp(e){const t=await ya(Re.ENDPOINTS.SPONSORS,{controller:e});if(t?.code!==200||!t.data)throw new Error("无法获取赞助者名单_错误的响应");const n=[],r=t.data.sponsors.sort().filter(i=>i.startsWith("爱发电用户_")?(n.push(`@${i}`),!1):!0).map(i=>`@${i}`);return r.reverse(),r.push(...n),{names:r,lastUpdate:t.data.date}}async function Up(e=999){try{const t=await ya(Re.ENDPOINTS.CONTRIBUTORS_RECENT);if(t?.code===200&&t.data?.contributors)return t.data.contributors.slice(0,e)}catch(t){console.error("获取最近贡献者列表失败:",t)}return[ka.NO_DATA]}async function Pp(e=1){if(typeof window<"u"&&window.location.hostname==="lightframe.vilinko.com")try{await fetch(`${Re.BASE_URL}${Re.ENDPOINTS.COUNTER_ADD}?id=${e}`)}catch{}}async function wp(){await Pp(1)}async function Fp(){try{const e=await fetch(Pa.RELEASES);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.text(),n=vp(t);return n.output?n.output.map(r=>{const i=r.values,s=String(i[0]||""),a=r.properties.build,o=Number(a||0),c=r.properties.date,u=String(c||""),l=(r.children||[]).map(h=>{const f=h.name,p=h.values,E=String(p[0]||"");return{type:f,description:E}});return{version:s,build:o,date:u,items:l}}):[]}catch(e){return console.error("获取发布日志失败:",e),[]}}export{Up as a,Fp as f,bp as g,wp as t};
